(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4b4d05ab"],{"07f7":function(e,t,a){},"1d2d":function(e,t,a){"use strict";var r=a("f592");a.n(r).a},"3b2b":function(e,t,a){var r=a("7726"),i=a("5dbc"),n=a("86cc").f,s=a("9093").f,o=a("aae3"),c=a("0bfb"),l=r.RegExp,u=l,d=l.prototype,p=/a/g,h=/a/g,m=new l(p)!==p;if(a("9e1e")&&(!m||a("79e5")((function(){return h[a("2b4c")("match")]=!1,l(p)!=p||l(h)==h||"/a/i"!=l(p,"i")})))){l=function(e,t){var a=this instanceof l,r=o(e),n=void 0===t;return!a&&r&&e.constructor===l&&n?e:i(m?new u(r&&!n?e.source:e,t):u((r=e instanceof l)?e.source:e,r&&n?c.call(e):t),a?this:d,l)};for(var f=function(e){e in l||n(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},b=s(u),g=0;b.length>g;)f(b[g++]);d.constructor=l,l.prototype=d,a("2aba")(r,"RegExp",l)}a("7a56")("RegExp")},"44ed":function(e,t,a){"use strict";var r=a("07f7");a.n(r).a},"469f":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("7d7b")},4835:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"m",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"i",(function(){return p})),a.d(t,"j",(function(){return h})),a.d(t,"h",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"n",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return y}));var r=a("b775"),i="/api/blade-platform",n="/api/blade-workbench",s=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/getParamTypeList"),method:"get"})},o=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/saveApiFieldMapping"),method:"post",data:e})},c=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/getApiFieldMapping"),method:"post",data:e})},l=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/page"),method:"post",data:e})},u=function(e){return Object(r.a)({url:"".concat(n,"/eduApiServe/detail"),method:"post",data:e})},d=function(e){return Object(r.a)({url:"".concat(n,"/eduApiServeData/detail"),method:"post",data:e})},p=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/save"),method:"post",data:e})},h=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/update"),method:"post",data:e})},m=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/officialAccountList"),method:"post",data:e})},f=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/removeOA"),method:"post",data:e})},b=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/saveOfficialAccountList"),method:"post",data:e})},g=function(e){return Object(r.a)({url:"".concat(i,"/newsSectionConfig/remove"),method:"post",data:e})},v=function(e){return Object(r.a)({url:"".concat(i,"/baseService/roleList"),method:"get"})},y=function(e){return Object(r.a)({url:"".concat(n,"/im/mp/allMpInfo"),method:"post",data:e})}},"5d73":function(e,t,a){e.exports=a("469f")},"5df3":function(e,t,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=r(t,a),this._i+=e.length,{value:e,done:!1})}))},6220:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"h",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"g",(function(){return p}));var r=a("b775"),i="/api/blade-platform",n=function(){return Object(r.a)({url:"".concat(i,"/serviceItem/itemlist"),method:"get"})},s=function(e){return Object(r.a)({url:"".concat(i,"/serviceItem/updateStatus"),method:"post",data:e})},o=function(e){return Object(r.a)({url:"".concat(i,"/serviceItem/itemDetail"),method:"post",data:e})},c=function(e){return Object(r.a)({url:"".concat(i,"/serviceItem/getMpList"),method:"post",data:e})},l=function(e){return Object(r.a)({url:"".concat(i,"/serviceItem/getMpListNS"),method:"post",data:e})},u=function(){return Object(r.a)({url:"".concat(i,"/serviceItem/getServiceType"),method:"get"})},d=function(){return Object(r.a)({url:"".concat(i,"/serviceItem/issueNewConfig"),method:"get"})},p=function(e){return Object(r.a)({url:"".concat(i,"/serviceItem/update"),method:"post",data:e})}},"768b":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("a745"),i=a.n(r);var n=a("5d73"),s=a.n(n),o=a("c8bb"),c=a.n(o);function l(e,t){return function(e){if(i()(e))return e}(e)||function(e,t){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],r=!0,i=!1,n=void 0;try{for(var o,l=s()(e);!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw n}}return a}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}},"7d7b":function(e,t,a){var r=a("e4ae"),i=a("7cd6");e.exports=a("584a").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"8cf1":function(e,t,a){},a89f:function(e,t,a){"use strict";var r=a("b492");a.n(r).a},b492:function(e,t,a){},b892:function(e,t,a){"use strict";a.r(t);var r=(a("8e6e"),a("456d"),a("7f7f"),a("768b")),i=(a("ac6a"),a("28a5"),a("96cf"),a("3b8d")),n=a("bd86"),s=(a("386d"),a("4835")),o=a("2f62"),c=a("da6f");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"faqRecord_basicpage",data:function(){return{tableLoading:!1,bmList:[],canNotClick:!1,addTitle:"新增分类",addModal:!1,isError:!0,noticeSpec:"分类删除后不可恢复，",noticeType:1,agreeContent:"确定",noticeTitle:"提示",noitceContent:"确定删除吗？",noticeModal:!1,delectID:"",treeData:[{label:"所有分类",children:[],show:!1}],total:0,tableData:[],hignModal:!1,searchForm:{keyId:"",useDevice:"",roleId:"",pageSize:40,currentPage:1},checked:!0,checkClassList:[],checkID:"",hignSearchRes:"",orderConfig:"",tableDataShow:[],countNum:1,tableRow:[{column:"栏目名称",key:"name",needKeyValue:!1,caseKey:"account"},{column:"栏目顺序",key:"sortOrder",needKeyValue:!1,caseKey:"user_name"},{column:"资讯来源",key:"sourceType",needKeyValue:!0,caseKey:"role_name"},{column:"查看权限",key:"needLogin",needKeyValue:!0,caseKey:"need_login"},{column:"查看角色",key:"viewPermission",needKeyValue:!0,caseKey:"roleId"},{column:"状态",key:"status",needKeyValue:!0,caseKey:"status"}],selectData:"",apiServerDataBaseId:"",deleteType:1,deleteList:[],roleList:[],handSynId:""}},mounted:function(){this.$store.state.common.newSearchParams?(this.searchForm=this.$store.state.common.newSearchParams,this.questionQuizListFuc()):this.search();var e=this.getSessonValue("faqRecord_basicpage_DisplayFied"),t=this.getSessonValue("faqRecord_basicpage_SortData");e&&(this.orderConfig=e),this.tableDataShow=t||this.tableRow,this.questionQuizListFuc(),this.getRoleList()},computed:u({},Object(o.d)({componentsName:function(e){return e.robotsManage.robotsManageComponentName}})),methods:u({},Object(o.c)({changeComponentName:"SET_robotsManageComponentName"}),{},Object(o.b)(["questionQuizList","questionQuizRemove"]),{enable:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.$store.dispatch("enable",{id:t.id,status:a});case 3:if(r=e.sent,1e3==r.data.status){e.next=8;break}return 0==a?this.$message.error("启用失败"):this.$message.error("停用失败"),e.abrupt("return");case 8:this.search();case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),handSyn:function(e){this.noticeSpec="",this.noticeType=1,this.agreeContent="确定",this.noticeTitle="提示",this.noitceContent="请在10分钟后，前往用户端查看具体资讯",this.handSynId=e.id,this.deleteType=5,this.noticeModal=!0},goHandSyn:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("handSyn",{id:this.handSynId});case 2:if(t=e.sent,1e3==t.data.status){e.next=7;break}return this.$message.error("立即同步失败"),e.abrupt("return");case 7:this.$message.success("立即同步成功"),this.noticeModal=!1,this.search();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSelectChange:function(e){this.checkClassList=[];for(var t=0;t<=e.length-1;t++)this.checkClassList.push(e[t].id);this.checkID=this.checkClassList.join(",")},handleSelectAll:function(e){this.checkClassList=[];for(var t=0;t<=e.length-1;t++)this.checkClassList.push(e[t].id);this.checkID=this.checkClassList.join(",")},getlable:function(e,t){var a=this;e[t];e.viewPermission;var i=e.viewPermission.split(",");i=i.filter((function(e){return e}));var n=[];return i.length>0&&i.forEach((function(e){var t=a.roleList.filter((function(t){return e==t.roleId})),i=Object(r.a)(t,1)[0];i&&n.push(i.name)})),n.join("，")},goAlumniDHTML:function(e){this.$emit("fatherMethod","AlumniDHTML"),Object(c.c)({name:"goAlumniDHTML",content:e,type:"session"})},goApi:function(e){this.$emit("fatherMethod","AlumniPact"),Object(c.c)({name:"managementAPI",content:e,type:"session"})},edit:function(e){this.$emit("fatherMethod","AlumniOpen"),Object(c.c)({name:"goRowData",content:e,type:"session"})},handleSelectionChange:function(e){this.checkClassList=[];for(var t=0;t<=e.length-1;t++)this.checkClassList.push(e[t].id);this.checkID=this.checkClassList.join(",")},toHignSearch:function(e){this.hignSearchRes=e,this.searchForm.currentPage=1,this.hignModal=!1,this.questionQuizListFuc()},agreeNotice:function(){2===this.deleteType?this.faqRecordRemove(this.delectID):3===this.deleteType?this.faqRecordRemove(this.checkID):4===this.deleteType?this.noticeModal=!1:5===this.deleteType&&this.goHandSyn(this.handSynId)},closeNotice:function(){this.delectID="",this.handSynId="",this.noticeModal=!1},deleteDataBase:function(){this.deleteType=1,this.noticeSpec="分类删除后不可恢复，",this.noticeType=1,this.agreeContent="确定",this.noticeTitle="提示",this.noitceContent="确定删除吗？",this.noticeModal=!0},deleteItem:function(e){this.noticeSpec="删除后，用户端不可查看此资讯栏目,",this.noticeType=1,this.agreeContent="确认",this.noticeTitle="提示",this.noitceContent="确定删除吗？",e?(this.delectID=e.id,this.deleteType=2,this.noticeModal=!0):0==this.checkClassList.length?this.$message.error("请勾选数据"):(this.deleteType=3,this.noticeModal=!0)},faqRecordRemove:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.k)({ids:t});case 3:if(a=e.sent,r=a.data,i=r.msg,1e3!==r.status){e.next=15;break}return this.noticeModal=!1,this.$message.success("删除成功"),this.$refs.faqRecordTableData.clearSelection(),this.checkClassList=[],this.delectID="",this.questionQuizListFuc(),e.abrupt("return");case 15:this.$message.error(i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),changeHign:function(){},closeModal:function(){this.hignModal=!1},hignSearch:function(){this.hignModal=!0},handleSizeChange:function(e){this.searchForm.currentPage=1,this.searchForm.pageSize=e,this.questionQuizListFuc()},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.questionQuizListFuc()},search:function(){this.hignSearchRes="",this.searchForm.currentPage=1,this.$refs.faqRecordTableData.clearSelection(),this.questionQuizListFuc()},getTableList:function(e){this.tableDataShow=e},getDataOrder:function(e){this.orderConfig=e,this.questionQuizListFuc()},getSessonValue:function(e){return Object(c.a)({name:e,type:"session"})},reset:function(e){this.$refs.faqRecordTableData.clearSelection(),this.$refs[e].resetFields(),this.searchForm.keyId="",this.searchForm.userName="",this.searchForm.roleId="",this.searchForm.useDevice="",this.searchForm.question="",this.searchForm.isMatch="",this.searchForm.time="",this.search()},getRoleList:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)();case 2:t=e.sent,a=t.data,r=a.result,a.msg,1e3==a.status&&(i=r.map((function(e){return{name:e.roleName,roleId:e.roleId}})),this.roleList=i);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),questionQuizListFuc:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$store.commit("SET_newSearchParams",this.searchForm),this.orderConfig,Array.isArray(this.orderConfig)&&this.orderConfig.join(","),this.tableLoading=!0,e.next=6,Object(s.d)({pageIndex:this.searchForm.currentPage,pageSize:this.searchForm.pageSize,name:this.searchForm.keyId,sourceType:this.searchForm.useDevice,needLogin:this.searchForm.roleId});case 6:t=e.sent,this.tableLoading=!1,1e3===t.data.status?0!==t.data.result.records.length?((a=t.data.result.records).forEach((function(e){0==e.needLogin&&(e.viewPermission="")})),this.tableData=a,this.total=t.data.result.total):1!==this.searchForm.currentPage?(this.searchForm.currentPage-=1,this.questionQuizListFuc()):(this.tableData=[],this.total=0):(this.tableData=[],this.total=0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()})},p=(a("d361"),a("2877")),h=Object(p.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ziXunSheZhi"},[a("div",{staticClass:"third-rea banji"},[a("div",{staticClass:"third-btn"},[a("div",{staticClass:"btn-left"},[e._v("检索条件")]),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:function(t){return e.reset("searchForm")}}},[e._v("重置")])],1)]),a("div",{staticClass:"third-search"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm,"label-width":"76px"}},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"栏目名称"}},[a("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchForm.keyId,callback:function(t){e.$set(e.searchForm,"keyId","string"==typeof t?t.trim():t)},expression:"searchForm.keyId"}})],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"资讯来源"}},[a("el-select",{staticClass:"item-input",attrs:{placeholder:"请选择"},model:{value:e.searchForm.useDevice,callback:function(t){e.$set(e.searchForm,"useDevice",t)},expression:"searchForm.useDevice"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{value:"OFFICIAL_ACCOUNT",label:"公众号"}}),a("el-option",{attrs:{value:"API",label:"API服务"}})],1)],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"查看权限"}},[a("el-select",{staticClass:"item-input",attrs:{placeholder:"请选择"},model:{value:e.searchForm.roleId,callback:function(t){e.$set(e.searchForm,"roleId",t)},expression:"searchForm.roleId"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{value:"1",label:"登录后才可查看"}}),a("el-option",{attrs:{value:"0",label:"未登录可查看"}})],1)],1)],1)])])],1)]),a("div",{staticClass:"third-one"},[a("div",{staticClass:"third-do-btn"},[a("el-button",{staticClass:"do-btn-four",attrs:{type:"default",icon:"el-icon-plus"},on:{click:function(t){return e.edit(null)}}},[e._v("新增")]),a("el-button",{staticClass:"do-btn-four",attrs:{type:"default",icon:"el-icon-delete"},on:{click:function(t){return e.deleteItem(null)}}},[e._v("删除")])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"faqRecordTableData",staticClass:"third-tableThree",attrs:{data:e.tableData,border:"",stripe:"","row-key":"id"},on:{select:e.handleSelectChange,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{type:"selection",width:"32px","reserve-selection":!0}}),e._l(e.tableDataShow,(function(t,r){return[t.needKeyValue?a("el-table-column",{key:r,attrs:{"min-width":"100px",prop:t.key,label:t.column,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return["status"===t.key?a("span",[1===r.row[t.key]?a("span",{staticStyle:{color:"#33cc99"}},[e._v("启用")]):e._e(),0===r.row[t.key]?a("span",{staticStyle:{color:"#ff4d4f"}},[e._v("停用")]):e._e()]):e._e(),"needLogin"===t.key?a("span",[1===r.row[t.key]?a("span",[e._v("登录后才可查看")]):e._e(),0===r.row[t.key]?a("span",[e._v("未登录可查看")]):e._e()]):e._e(),"sourceType"===t.key?a("span",["OFFICIAL_ACCOUNT"===r.row[t.key]?a("span",[e._v("公众号")]):a("span",[e._v("API服务")])]):e._e(),"viewPermission"===t.key?[e._v("\n                "+e._s(e.getlable(r.row,t.key))+"\n              ")]:e._e()]}}],null,!0)}):a("el-table-column",{key:r,attrs:{"min-width":"100px",prop:t.key,label:t.column,"show-overflow-tooltip":!0}})]})),a("el-table-column",{attrs:{label:"操作","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0===r.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.enable(r,1)}}},[e._v("启用")]):e._e(),1===r.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.enable(r,0)}}},[e._v("停用")]):e._e(),a("span",{staticClass:"tableThree-height-shu"},[a("span",{staticClass:"shu-item"})]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.edit(r)}}},[e._v("编辑")]),a("span",{staticClass:"tableThree-height-shu"},[a("span",{staticClass:"shu-item"})]),"OFFICIAL_ACCOUNT"==r.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.goAlumniDHTML(r)}}},[e._v("管理公众号")]):e._e(),a("span",{staticClass:"tableThree-height-shu",style:{display:"OFFICIAL_ACCOUNT"==r.sourceType?"":"none"}},[a("span",{staticClass:"shu-item"})]),"OFFICIAL_ACCOUNT"!==r.sourceType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.goApi(r)}}},[e._v("管理API")]):e._e(),a("span",{staticClass:"tableThree-height-shu",style:{display:"OFFICIAL_ACCOUNT"!=r.sourceType?"":"none"}},[a("span",{staticClass:"shu-item"})]),"OFFICIAL_ACCOUNT"!==r.sourceType&&1===r.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handSyn(r)}}},[e._v("立即同步\n            ")]):e._e(),a("span",{staticClass:"tableThree-height-shu",style:{display:"OFFICIAL_ACCOUNT"!=r.sourceType?"":"none"}},[a("span",{staticClass:"shu-item"})]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteItem(r)}}},[e._v("删除")])]}}])})],2),a("div",{staticClass:"third-page"},[a("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,background:"","page-sizes":[10,20,30,40],"page-size":e.searchForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("notice-modal",{attrs:{noticeModalVisible:e.noticeModal,noticeTitle:e.noticeTitle,noticeSpec:e.noticeSpec,isError:e.isError,noticeType:e.noticeType,btnAgree:e.agreeContent,noticeContent:e.noitceContent},on:{noticeModalClose:e.closeNotice,noticeModalAgree:e.agreeNotice}})],1)}),[],!1,null,null,null).exports,m=a("75fc"),f=(a("c5f6"),a("3b2b"),a("8a23")),b=a("2ef0");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={name:"formSeven",props:["rowId"],data:function(){return{currentName:"",countNum:1,addModalVisible:!1,cpRowId:this.rowId,agreeNotice:{},noticeType:1,agreeContent:"确定",noticeTitle:"提示",noitceContent:"确定启用删除吗？",noticeModal:!1,noticeSpec:"",ruleForm:{id:"",showName:"",information:"1",order:void 0,viewRole:"0"},information1:"",rules:{showName:[{required:!0,message:"请输入资讯栏目名称",trigger:"blur"}],information:[{required:!0,message:"请选择资讯来源",trigger:"blur"}],viewRole:[{required:!0,message:"请选择查看权限",trigger:"blur"}],order:[{required:!0,message:"请输入顺序",trigger:"blur"}]},currentTableData:[],roleTags:[],roleTreeDialogVisible:!1,roleTree:[],talNname:"新增",rowData:{},apiServeDataId:"",id:""}},components:{},created:function(){var e=Object(c.a)({name:"goRowData",type:"session"});null!=e?(this.rowData=e,this.talNname="编辑",this.ruleForm.showName=e.name,this.ruleForm.information="OFFICIAL_ACCOUNT"==e.sourceType?"1":"2",this.information1="OFFICIAL_ACCOUNT"!==e.sourceType&&"API"!==e.sourceType?e.sourceType:"",this.ruleForm.order=e.sortOrder,this.ruleForm.viewRole=e.needLogin+"",this.apiServeDataId=e.apiServeDataId,this.id=e.id):this.talNname="新增",this.getRolelist()},mounted:function(){},watch:{rowId:function(){this.cpRowId=this.rowId}},methods:{getRolelist:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("getServiceRoleList");case 3:1e3===(t=e.sent).data.status&&(a=t.data.result,this.roleTree=a),r=[],this.roleTags=[],this.roleTree.forEach((function(e){e.children.forEach((function(e){r.push(e)}))})),this.rowData.viewPermission&&this.rowData.viewPermission.split(",").forEach((function(e){var t=r.map((function(t){if(t.roleId===e)return{id:t.roleId,name:t.roleName}}));(t=t.filter((function(e){return e}))).forEach((function(e){return i.roleTags.push(e)}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),handleRoleClose:function(e){var t=this.roleTags;this.roleTags=t.filter((function(t){return t!==e}))},addTags:function(e){var t=this;if(this.roleTreeDialogVisible=!0,this.roleOrlabel=!0,this.roleTags.length>0){var a=this.roleTags.map((function(e){return e.id}));this.$nextTick((function(){t.$refs.roleTree.setCheckedKeys(a)}))}},getCheckedKeys:function(e){var t=this.$refs[e].getCheckedNodes();if(this.roleOrlabel){var a=t.map((function(e){if(e.roleId)return{name:e.roleName,id:e.roleId}}));this.roleTags=a.filter((function(e){return e})),this.roleTreeDialogVisible=!1}},goBack:function(){this.$emit("fatherMethod","adhibitionJPG")},validateValue:function(e,t,a){this.countNum||t||(this.countNum+=1,a&&this.$message.error(a))},commit:function(){var e=this;this.countNum=0,this.$nextTick((function(){e.$refs.ruleForm.validate((function(t){if(!t)return!1;e.countNum=1,null==Object(c.a)({name:"goRowData",type:"session"})?e.addData():e.updateData()}))}))},resetForm:function(){this.$refs.ruleForm.clearValidate();var e=Object(c.a)({name:"goRowData",type:"session"});null!=e?(this.rowData=e,this.ruleForm.showName=e.name,this.ruleForm.information="OFFICIAL_ACCOUNT"==e.sourceType?"1":"2",this.information1="OFFICIAL_ACCOUNT"!==e.sourceType&&"API"!==e.sourceType?e.sourceType:"",this.ruleForm.order=e.sortOrder,this.ruleForm.viewRole=e.needLogin+"",this.getRolelist()):(this.ruleForm.showName="",this.ruleForm.information="1",this.ruleForm.order=void 0,this.ruleForm.viewRole="0",this.roleTags=[])},updateData:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="2"==this.ruleForm.information&&this.information1?this.information1:"2"==this.ruleForm.information?"API":"OFFICIAL_ACCOUNT",a={id:this.id,name:this.ruleForm.showName,sourceType:t,sortOrder:this.ruleForm.order,needLogin:Number(this.ruleForm.viewRole),viewPermission:this.roleTags.map((function(e){return e.id})).join(","),apiServeDataId:this.apiServeDataId,createTime:"",updateTime:""},e.prev=7,e.next=10,Object(s.j)(v({},a));case 10:if(r=e.sent,i=r.data,i.result,n=i.msg,1e3!==i.status){e.next=20;break}return this.$message.success("操作成功"),this.goBack(),e.abrupt("return");case 20:return e.abrupt("return",this.$message.error(n));case 23:e.prev=23,e.t0=e.catch(7);case 26:case"end":return e.stop()}}),e,this,[[7,23]])})));return function(){return e.apply(this,arguments)}}(),deleteRowConfirm:function(e,t){this.deleteRow(t)},deleteRow:function(e){this.currentTableData.splice(e,1)},updateStatus:function(e,t){"1"!==e.openStatus?this.$set(this.currentTableData[t],"openStatus","1"):this.$set(this.currentTableData[t],"openStatus","2")},addData:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,t={id:this.id,name:this.ruleForm.showName,sourceType:"1"==this.ruleForm.information?"OFFICIAL_ACCOUNT":"API",sortOrder:this.ruleForm.order,needLogin:Number(this.ruleForm.viewRole),viewPermission:this.roleTags.map((function(e){return e.id})).join(","),apiServeDataId:this.apiServeDataId,createTime:"",updateTime:""},e.next=6,Object(s.i)(v({},t));case 6:if(a=e.sent,r=a.data,r.result,i=r.msg,1e3!==r.status){e.next=16;break}return this.$message.success("操作成功"),this.goBack(),e.abrupt("return");case 16:return e.abrupt("return",this.$message.error(i));case 19:e.prev=19,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),closeAddModal:function(){this.addModalVisible=!1},openAddDialog:function(){this.addModalVisible=!0},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;f.a.create(e,{onEnd:function(e){var a=e.newIndex,r=e.oldIndex,i=t.currentTableData.splice(r,1)[0];t.currentTableData.splice(a,0,i);var n=Object(m.a)(t.currentTableData);t.currentTableData=[],t.$nextTick((function(){t.currentTableData=Object(m.a)(n)}))}})},itemDetail:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,itemDetailPort({id:this.rowId});case 4:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=15;break}return this.currentName=r.itemName,this.ruleForm=r,this.currentTableData=Object(m.a)(r.serviceList),e.abrupt("return");case 15:return e.abrupt("return",this.$message.error(i));case 18:e.prev=18,e.t0=e.catch(1);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),closeNotice:function(){this.noticeModal=!1},copyUrl:function(e,t){var a=this;document.addEventListener("copy",(function r(i){i.preventDefault(),i.clipboardData.setData("text/plain",e+t),a.$message.success("操作成功"),document.removeEventListener("copy",r)})),document.execCommand("copy")},changeComponent:function(){this.$emit("changeComponent","homePage")}}},C=(a("44ed"),Object(p.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third ziXunLanMu"},[a("div",{staticClass:"third-formOne"},[a("div",{staticClass:"formOne-btn"},[a("div",{staticClass:"btn-left"},[a("span",{staticClass:"left-back-icon",on:{click:e.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),a("span",{staticClass:"left-back-title"},[e._v("返回")])]),e._m(0),a("span",{staticClass:"left-back-content"},[e._v(e._s(e.talNname)+"资讯栏目")])]),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{directives:[{name:"el-disabel-repeat-click",rawName:"v-el-disabel-repeat-click"}],staticClass:"btn-two",attrs:{type:"primary"},on:{click:e.commit}},[e._v("保存")])],1)]),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"86px","show-message":!1},on:{validate:e.validateValue}},[a("div",{staticClass:"formOne-forms"},[a("div",{staticClass:"forms-one",staticStyle:{"margin-top":"57px"}},[a("div",{staticClass:"one-title"},[a("div",{staticClass:"title-left"},[a("span",{staticClass:"left-icon"},[a("i",{staticClass:"el-icon-s-operation"})]),a("span",{staticClass:"left-content"},[e._v("基本信息")])])]),a("div",{staticClass:"one-list"},[a("el-form-item",{attrs:{label:"资讯栏目名称",prop:"showName"}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:6,placeholder:"请输入"},model:{value:e.ruleForm.showName,callback:function(t){e.$set(e.ruleForm,"showName","string"==typeof t?t.trim():t)},expression:"ruleForm.showName"}}),a("span")],1),a("el-form-item",{attrs:{label:"资讯来源",prop:"information"}},[a("el-radio-group",{model:{value:e.ruleForm.information,callback:function(t){e.$set(e.ruleForm,"information",t)},expression:"ruleForm.information"}},[a("el-radio",{attrs:{label:"1"}},[e._v("公众号")]),a("el-radio",{attrs:{label:"2"}},[e._v("API服务")])],1)],1),a("el-form-item",{attrs:{label:"顺序",prop:"order"}},[a("el-input-number",{staticClass:"list-input baseData-input-number",attrs:{controls:!1,min:0,max:9999,"step-strictly":"",placeholder:"请输入正整数"},model:{value:e.ruleForm.order,callback:function(t){e.$set(e.ruleForm,"order",t)},expression:"ruleForm.order"}})],1),a("el-form-item",{attrs:{label:"查看权限",prop:"viewRole"}},[a("el-radio-group",{model:{value:e.ruleForm.viewRole,callback:function(t){e.$set(e.ruleForm,"viewRole",t)},expression:"ruleForm.viewRole"}},[a("el-radio",{attrs:{label:"0"}},[e._v("未登录可查看")]),a("el-radio",{attrs:{label:"1"}},[e._v("登录后才可查看")])],1)],1),a("el-form-item",{attrs:{label:"查看角色"}},[1==e.ruleForm.viewRole?[e._l(e.roleTags,(function(t){return a("el-tag",{key:t.id,staticStyle:{margin:"0 4px"},attrs:{closable:""},on:{close:function(a){return e.handleRoleClose(t)}}},[e._v(e._s(t.name))])})),a("el-button",{staticStyle:{height:"24px"},attrs:{type:"default",icon:"el-icon-plus"},on:{click:function(t){return e.addTags("role")}}},[e._v("新增")])]:a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[e._v("所有用户可查看此资讯栏目，同时游客模式下用户可查看此栏目的信息列表及信息详情")])],2)],1)])])])],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"serviceListTree",attrs:{title:"新增授权角色",visible:e.roleTreeDialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.roleTreeDialogVisible=t}}},[a("el-tree",{ref:"roleTree",attrs:{data:e.roleTree,"show-checkbox":"","default-expand-all":"","node-key":"roleId","highlight-current":"",props:{children:"children",label:"roleName"}}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleTreeDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getCheckedKeys("roleTree")}}},[e._v("确 定")])],1)],1),a("notice-modal",{attrs:{noticeModalVisible:e.noticeModal,noticeTitle:e.noticeTitle,noticeSpec:e.noticeSpec,noticeType:e.noticeType,btnAgree:e.agreeContent,noticeContent:e.noitceContent},on:{noticeModalClose:e.closeNotice,noticeModalAgree:e.agreeNotice}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"left-back-shu"},[t("span",{staticClass:"left-back-shu-content"})])}],!1,null,null,null)).exports,w=(a("7514"),a("5df3"),a("6220")),T=(a("20d6"),{name:"addMemberModal",props:{addData:{type:Object},addItem:{type:Object},addColumn:{type:Array},addModalVisible:{type:Boolean,default:!1},addModalTitle:{type:String,default:"添加人员（不含已有人员）"},addType:{type:String,default:"1"},closeonclickmodal:{type:Boolean,default:!1},NowCustomerId:{type:String},choosedList:{type:Array,default:function(){return[]}}},watch:{choosedList:function(){this.cpChoosedList=this.choosedList},addModalVisible:function(e){var t=this;e?(this.cpChoosedList&&(this.selectedIds=[],this.selectedList=this.cpChoosedList,this.cpChoosedList.forEach((function(e){t.selectedIds.push(e.officialAccountId)}))),this.resetSearch=!1,this.getMpList()):(this.refreshDialog(),this.resetSearch=!0),this.selectedList1=[]},tableData:function(){var e=this;this.selectedList.length&&this.selectedList.forEach((function(t){var a=e.tableData.findIndex((function(e){return e.mpAccount===t.modifiedValue}));-1!==a&&e.tableData.splice(a,1)}))}},created:function(){},data:function(){return{cpChoosedList:this.choosedList,isNeedRrefresh:!0,mpType:"",serviceName:"",accountSubject:"",loading:!1,onlyId:"id",addPage:1,addPageSize:10,stuAddTotal:0,tableData:[],selectArr:[],allSelect:!1,resetSearch:!1,selectCount:0,fixCount:0,selectedList:[],selectedList1:[],selectedIds:[]}},methods:{refreshDialog:function(){var e=this;this.isNeedRrefresh=!1,this.$nextTick((function(){e.isNeedRrefresh=!0}))},getMpList:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableData=[],e.next=3,Object(w.b)({serviceName:this.serviceName,accountSubject:this.accountSubject,mpType:this.mpType,pageIndex:this.addPage,pageSize:this.addPageSize,filterIds:this.selectedIds});case 3:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=12;break}return this.tableData=r.dataList,this.stuAddTotal=r.total,e.abrupt("return");case 12:return e.abrupt("return",this.$message.error(i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),resetFormData:function(){var e=this;this.$nextTick(Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.addPage=1,t.next=3,e.getMpList();case 3:case"end":return t.stop()}}),t)}))))},searchInput:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addPage=1,e.next=3,this.getMpList();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),resetInput:function(){this.addPage=1,this.serviceName="",this.accountSubject="",this.mpType="",this.getMpList()},selectAllBox:function(e){this.selectedList1=[];for(var t=0;t<=e.length-1;t++)this.selectedList1.push(e[t])},handleSelection:function(e){this.selectedList1=[];for(var t=0;t<=e.length-1;t++)this.selectedList1.push(e[t])},selectAll:function(){},cancelAll:function(){},addSizeChange:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addPage=1,this.addPageSize=t,e.next=4,this.getMpList();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),addCurrentChange:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addPage=t,e.next=3,this.getMpList();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleClose:function(){this.selectCount=0,this.allSelect=!1,this.selectArr=[],this.addPage=1,this.$emit("closeAddModal")},agreeAdd:function(){if(0===this.selectedList1.length)return this.$message.warning("请选择需要新增的公众号");this.$emit("addData",this.selectedList1)},closeModal:function(){this.$emit("closeAddModal")}}}),F=(a("1d2d"),Object(p.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isNeedRrefresh?a("div",{staticClass:"add-member-modal fdyModal"},[a("el-dialog",{attrs:{visible:e.addModalVisible,width:"932px","before-close":e.handleClose,"close-on-click-modal":e.closeonclickmodal},on:{"update:visible":function(t){e.addModalVisible=t}}},[a("div",{staticClass:"member-modal-title",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"modal-title-span"},[e._v("新增公众号")])]),a("div",{staticClass:"member-modal-content"},[a("div",{staticClass:"third-rea"},[a("div",{staticClass:"third-btn"},[a("div",{staticClass:"btn-left"},[e._v("检索条件")]),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"primary"},on:{click:e.searchInput}},[e._v("查询")]),a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:e.resetInput}},[e._v("重置")])],1)]),a("div",{staticClass:"third-search",staticStyle:{"padding-bottom":"0"}},[a("el-form",{attrs:{inline:!0,model:e.addData,"label-width":"76px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInput(t)}}},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"row-item member-search-item"},[a("el-form-item",{attrs:{label:"公众号名称"}},[a("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},model:{value:e.serviceName,callback:function(t){e.serviceName=t},expression:"serviceName"}})],1)],1),a("div",{staticClass:"row-item member-search-item"},[a("el-form-item",{attrs:{label:"账号主体"}},[a("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},model:{value:e.accountSubject,callback:function(t){e.accountSubject=t},expression:"accountSubject"}})],1)],1),a("div",{staticClass:"row-item member-search-item"},[a("el-form-item",{attrs:{label:"公众号性质"}},[a("el-select",{staticClass:"item-input",attrs:{placeholder:"请选择"},model:{value:e.mpType,callback:function(t){e.mpType=t},expression:"mpType"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{value:4,label:"部门号"}}),a("el-option",{attrs:{value:5,label:"订阅号"}})],1)],1)],1)])])],1)]),a("div",{staticClass:"third-one"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"addMemberTable",staticClass:"third-tableThree tableThree-add",attrs:{data:e.tableData,border:"",stripe:"","row-key":"mpAccount"},on:{select:e.handleSelection,"select-all":e.selectAllBox}},[a("el-table-column",{attrs:{type:"selection",width:"32px","reserve-selection":!0}}),a("el-table-column",{attrs:{prop:"mpName",label:"公众号名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"mpAccount",label:"账号编号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"accountSubject",label:"账号主体","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"mpType",label:"账号性质","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(4==r.mpType?"部门号":"订阅号"))])]}}],null,!1,2034682615)})],1),a("div",{staticClass:"third-page add-modal-page"},[a("div",{staticClass:"page-left"},[a("span",{staticClass:"left-data"},[e._v("已选中"+e._s(e.selectedList1.length)+"条数据")])]),a("el-pagination",{staticClass:"page-right",attrs:{"current-page":e.addPage,background:"","page-sizes":[10,20,30,40],"page-size":e.addPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.stuAddTotal},on:{"size-change":e.addSizeChange,"current-change":e.addCurrentChange}})],1)],1)]),a("div",{staticClass:"member-modal-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"modal-footer-two",on:{click:e.closeModal}},[e._v("取消")]),a("el-button",{directives:[{name:"el-disabel-repeat-click",rawName:"v-el-disabel-repeat-click"}],staticClass:"modal-footer-two",attrs:{type:"primary"},on:{click:e.agreeAdd}},[e._v("确定")])],1)])],1):e._e()}),[],!1,null,null,null)).exports,k=(a("44f4"),{name:"formSeven",props:["rowId"],data:function(){return{concatArr:[],currentName:"",countNum:1,addModalVisible:!1,cpRowId:this.rowId,noticeType:1,agreeContent:"确定",noticeTitle:"提示",noitceContent:"确定启用删除吗？",noticeModal:!1,noticeSpec:"",ruleForm:{id:"",columnName:""},rules:{orderNum:[{required:!0,message:"请输入栏目顺序",trigger:"blur"}],showName:[{required:!1,message:"请输入展示名称",trigger:"blur"}],homeRow:[{required:!0,message:"请选择公众号消息集合展示位置",trigger:"change"}],openAll:[{required:!0,message:"请选择公众号消息集合",trigger:"change"}]},currentTableData:[]}},components:{addOfficalAccounts:F},created:function(){var e=this,t=Object(c.a)({name:"goAlumniDHTML",type:"session"});this.ruleForm.id=t.id,this.ruleForm.columnName=t.name,Promise.all([this.mpList()]).then((function(t){e.itemDetail()}))},mounted:function(){var e=this;this.$nextTick((function(){e.rowDrop()}))},watch:{rowId:function(){this.cpRowId=this.rowId},currentTableData:function(){var e=this;this.$nextTick((function(){e.rowDrop()}))}},methods:{getlable:function(e){var t="";e.mpAccount?t=this.concatArr.filter((function(t){return t.phone==e.mpAccount}))[0].fansCount:t="";return t},mpList:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Object(s.g)({accountSubject:"",code:"",endTime:"",isMessage:-1,managementId:"",mpType:4,nickname:"",pageIndex:1,pageSize:40,pasuse:"-1",startTime:""});case 4:return t=e.sent,a=t.data,r=a.result,i=a.msg,n=a.status,e.next=11,Object(s.g)({accountSubject:"",code:"",endTime:"",isMessage:-1,managementId:"",mpType:5,nickname:"",pageIndex:1,pageSize:40,pasuse:"-1",startTime:""});case 11:if(o=e.sent,1e3!==n||1e3!=o.data.status){e.next=18;break}return c=r.data.concat(o.data.result.data),this.concatArr=c,e.abrupt("return");case 18:return e.abrupt("return",this.$message.error(i));case 21:e.prev=21,e.t0=e.catch(1);case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),deleteItem:function(e){this.noticeSpec="删除后，资讯栏目将不再展示该公众号的消息，",this.noticeType=1,this.agreeContent="确认",this.noticeTitle="提示",this.noitceContent="确定删除吗？",null==e?this.checkID?(this.deleteType=3,this.noticeModal=!0):this.$message.error("请勾选数据"):(this.delectID=e,this.deleteType=2,this.noticeModal=!0)},goBack:function(){this.$emit("fatherMethod","adhibitionJPG")},handleSelectionChange:function(e){this.checkClassList=[];for(var t=0;t<=e.length-1;t++)this.checkClassList.push(e[t].id);this.checkID=this.checkClassList.join(",")},validateValue:function(e,t,a){this.countNum||t||(this.countNum+=1,a&&this.$message.error(a))},commit:function(){this.updateData(),this.$refs.multipleTable.clearSelection()},resetForm:function(){var e=this;this.$refs.multipleTable.clearSelection(),this.$nextTick((function(){e.itemDetail()}))},updateData:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Object(s.n)({id:this.ruleForm.id,officialAccountIds:t});case 4:if(a=e.sent,r=a.data,r.result,i=r.msg,1e3!==r.status){e.next=15;break}return this.$message.success("操作成功"),this.addModalVisible=!1,this.resetForm(),e.abrupt("return");case 15:return e.abrupt("return",this.$message.error(i));case 18:e.prev=18,e.t0=e.catch(1);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),agreeNotice:function(){var e=this;if(2===this.deleteType){var t=[],a=this.currentTableData.find((function(t){return t.id==e.delectID}));t.push({officialAccountId:a.officialAccountId,newsSectionId:a.newsSectionId}),this.deleteRow(t),this.noticeModal=!1}else if(3===this.deleteType){var r=[];this.checkID.split(",").forEach((function(t){var a=e.currentTableData.find((function(e){return e.id==t}));r.push({officialAccountId:a.officialAccountId,newsSectionId:a.newsSectionId})})),this.deleteRow(r),this.noticeModal=!1}else 4===this.deleteType&&(this.noticeModal=!1)},deleteRow:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.l)({id:this.ruleForm.id,officialAccountIds:t});case 3:if(a=e.sent,(r=a.data).result,i=r.msg,1e3!==r.status){e.next=12;break}return this.$message.success(i),this.resetForm(),e.abrupt("return");case 12:return e.abrupt("return",this.$message.error(i));case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),updateStatus:function(e,t){"1"!==e.openStatus?this.$set(this.currentTableData[t],"openStatus","1"):this.$set(this.currentTableData[t],"openStatus","2")},addData:function(e){var t=this,a=[];e.forEach((function(e){a.push({officialAccountId:e.officialAccountId,newsSectionId:t.ruleForm.id})})),this.updateData(a),this.$refs.multipleTable.clearSelection()},closeAddModal:function(){this.addModalVisible=!1},openAddDialog:function(){this.addModalVisible=!0},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;f.a.create(e,{onEnd:function(e){var a=e.newIndex,r=e.oldIndex,i=t.currentTableData.splice(r,1)[0];t.currentTableData.splice(a,0,i);var n=Object(m.a)(t.currentTableData);t.currentTableData=[],t.$nextTick((function(){t.currentTableData=Object(m.a)(n)}))}})},itemDetail:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,o,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Object(s.h)({id:this.ruleForm.id});case 4:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=16;break}return n=Object(b.cloneDeep)(r),(o=JSON.parse(JSON.stringify(n))).forEach((function(e,t){var a=c.concatArr.filter((function(t){return t.phone==e.mpAccount}));a.length>0&&(o[t].mpAccount=a[0].fansCount,o[t].modifiedValue=a[0].phone,o[t].status=a[0].isPasuse)})),this.currentTableData=o,e.abrupt("return");case 16:return e.abrupt("return",this.$message.error(i));case 19:e.prev=19,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),closeNotice:function(){this.noticeModal=!1},copyUrl:function(e,t){var a=this;document.addEventListener("copy",(function r(i){i.preventDefault(),i.clipboardData.setData("text/plain",e+t),a.$message.success("操作成功"),document.removeEventListener("copy",r)})),document.execCommand("copy")},changeComponent:function(){this.$emit("changeComponent","homePage")}}}),S=(a("be89"),Object(p.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third guanLiGZH"},[a("div",{staticClass:"third-formOne"},[a("div",{staticClass:"formOne-btn"},[a("div",{staticClass:"btn-left"},[a("span",{staticClass:"left-back-icon",on:{click:e.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),a("span",{staticClass:"left-back-title"},[e._v("返回")])]),e._m(0),a("span",{staticClass:"left-back-content"},[e._v(e._s(e.ruleForm.columnName)+"/管理公众号")])]),a("div",{staticClass:"btn-right"})]),a("div",{staticClass:"formOne-forms"},[a("div",{staticClass:"forms-one",staticStyle:{"margin-top":"57px"}},[a("div",{staticClass:"one-list"},[a("div",{staticClass:"add-row"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增")]),a("el-button",{staticClass:"do-btn-four",attrs:{type:"default",icon:"el-icon-delete"},on:{click:function(t){return e.deleteItem(null)}}},[e._v("删除")])],1),a("div",{staticClass:"list-four-line"},[a("el-table",{ref:"multipleTable",staticClass:"third-tableThree",attrs:{data:e.currentTableData,border:"",stripe:"","row-key":"officialAccountId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("el-table-column",{attrs:{prop:"mpName",label:"公众号名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"modifiedValue",label:"公众号编号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"accountSubject",label:"账号主体","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"mpType",label:"账号性质","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(4==r.mpType?"部门号":"订阅号"))])]}}])}),a("el-table-column",{attrs:{prop:"description",label:"账号简介","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"mpAccount",label:"订阅用户","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{style:{color:"0"==r.status?"#33CC99":"#FF4D4F"}},[e._v(e._s("0"==r.status?"启用":"停用"))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"state",label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",disabled:"ALL"===t.row.editStatus},on:{click:function(a){return e.deleteItem(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])])])]),a("notice-modal",{attrs:{noticeModalVisible:e.noticeModal,noticeTitle:e.noticeTitle,noticeSpec:e.noticeSpec,noticeType:e.noticeType,btnAgree:e.agreeContent,noticeContent:e.noitceContent},on:{noticeModalClose:e.closeNotice,noticeModalAgree:e.agreeNotice}}),a("addOfficalAccounts",{attrs:{addModalVisible:e.addModalVisible,choosedList:e.currentTableData},on:{closeAddModal:e.closeAddModal,addData:e.addData}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"left-back-shu"},[t("span",{staticClass:"left-back-shu-content"})])}],!1,null,null,null)).exports;function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={name:"formSeven",props:["rowId"],data:function(){return{isError:!0,apiName:"",requstRemark:"请选择接口",currentName:"",countNum:1,addModalVisible:!1,cpRowId:this.rowId,noticeType:1,agreeContent:"确定",agreeContentTwo:"",noticeTitle:"提示",noitceContent:"确定启用删除吗？",noticeModal:!1,noticeSpec:"",ruleForm:{apiForm:"1",api:"",canShu:!0,canShuYS:"",syncOne:{seconds:"",date:""},infoData:{},shujuzhi:15,picture:"",issuer:"",releaseTime:"",JumpSite:"",content:"",headline:"",requestParamList:[],synTime:"",lastKeepRecentDays:void 0},otherForm:{projectName:"",serveData:"",serveProtocol:"",requestParamList:[],returnParamList:[],revisionList:[]},rules:{showName:[{required:!0,message:"请输入展示名称",trigger:"blur"}],apiForm:[{required:!0,message:"请输入接口来源",trigger:"change"}],canShuYS:[{required:!0,message:"请输入参数映射值",trigger:"change"}],api:[{required:!0,message:"请选择接口",trigger:"blur"}]},currentTableData:[],roleTags:[],roleTreeDialogVisible:!1,roleTree:[],talNname:"新增",options:[],ownerCompanyOpts:[],ownerCompanyInitData:[],existIds:[],options2:[],value:"",id:"",Rowid:"",selectedID:""}},components:{KeyValueSelect2:a("d718").a},created:function(){var e=this,t=Object(c.a)({name:"managementAPI",type:"session"});this.Rowid=t.id,this.apiName=t.name,this.ruleForm.lastKeepRecentDays=t.lastKeepRecentDays||180,this.ruleForm.synTime=t.synTime||"03:00",t.apiServeDataId&&"API"!=t.sourceType?(this.id=t.apiServeDataId,this.selectedID=t.apiServeDataId,this.ruleForm.apiForm="SERVICE_API"==t.sourceType?"2":"1",Promise.all([this.itemDetail(),this.getParamTypeList()]).then((function(t){e.getApiFieldMapping()}))):this.getParamTypeList()},mounted:function(){},watch:{rowId:function(){this.cpRowId=this.rowId}},computed:D({isVB:function(){return!!(this.ruleForm.requestParamList&&this.ruleForm.requestParamList.length>0)}},Object(o.d)({userInfo:function(e){return e.user.userInfo}})),methods:{agreeNotice:function(){this.updateData(1)},agreeNoticeTwo:function(){this.updateData(2)},getParamTypeList:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.e)();case 3:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=14;break}for(o in n=[],r)(c={}).label=o,c.value=r[o],n.push(c);return this.options2=n,e.abrupt("return");case 14:return e.abrupt("return",this.$message.error(i));case 17:e.prev=17,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),getApiFieldMapping:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.c)({id:this.Rowid});case 3:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=14;break}return r.forEach((function(e){if("PARAM"==e.paramType)for(var t=0;t<n.ruleForm.requestParamList.length;t++)n.ruleForm.requestParamList[t].name==e.originalField&&(n.ruleForm.requestParamList[t].showValue=e.mapping,n.ruleForm.requestParamList[t].customValue=e.customValue);else"CONTENT"==e.paramType&&"title"==e.originalField?n.ruleForm.headline=e.mapping:"CONTENT"==e.paramType&&"publisher"==e.originalField?n.ruleForm.issuer=e.mapping:"CONTENT"==e.paramType&&"publishDate"==e.originalField?n.ruleForm.releaseTime=e.mapping:"CONTENT"==e.paramType&&"url"==e.originalField?n.ruleForm.JumpSite=e.mapping:"CONTENT"==e.paramType&&"content"==e.originalField?n.ruleForm.content=e.mapping:"CONTENT"==e.paramType&&"img"==e.originalField&&(n.ruleForm.picture=e.mapping)})),this.go(),e.abrupt("return");case 14:return e.abrupt("return",this.$message.error(i));case 17:e.prev=17,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),ownerCompanyClick:function(e){this.go(),this.options.forEach((function(t){t.value==e&&(t.isShow=!0)}))},go:function(){var e=[];this.ruleForm.headline&&e.push(this.ruleForm.headline),this.ruleForm.content&&e.push(this.ruleForm.content),this.ruleForm.JumpSite&&e.push(this.ruleForm.JumpSite),this.ruleForm.releaseTime&&e.push(this.ruleForm.releaseTime),this.ruleForm.issuer&&e.push(this.ruleForm.issuer),this.ruleForm.picture&&e.push(this.ruleForm.picture),this.options.forEach((function(e){e.isShow=!0}));for(var t=0;t<e.length;t++)this.options.forEach((function(a){a.value===e[t]&&(a.isShow=!1)}))},changeInfoData:function(e){e.id!=this.selectedID?(this.id=e.id,this.itemDetail()):this.resetForm()},itemDetail:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,o,c,l,u,d,p,h,m,f,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"2"!=this.ruleForm.apiForm){e.next=28;break}return e.next=4,Object(s.a)({id:this.id,tenantId:this.userInfo.tenant_id,hostUrl:window.location.origin+"/"});case 4:if(t=e.sent,a=t.data,r=a.result,i=a.msg,1e3!==a.status){e.next=25;break}if(n=Object(b.cloneDeep)(r.requestParamList),this.ruleForm.api="".concat(r.serveData.note,"(").concat(r.serveData.name,")"),n?(n.length<1&&(this.requstRemark="暂无数据"),o=[],n.forEach((function(e){if("appKey"!==e.name&&"isAll"!==e.name){var t=D({},e,{showValue:"",value:"",customValue:""});o.push(Object(b.cloneDeep)(t))}})),this.ruleForm.requestParamList=o):this.requstRemark="暂无数据",!(c=Object(b.cloneDeep)(r.returnParamList))){e.next=23;break}return l=[],c.forEach((function(e){var t={};t.label="".concat(e.name,"(").concat(e.note,")"),t.value="".concat(e.name),t.isShow=!0,l.push(t)})),this.options=l,e.abrupt("return");case 23:return this.options=[],e.abrupt("return");case 25:return e.abrupt("return",this.$message.error(i));case 28:return e.next=30,Object(s.b)({id:this.id,tenantId:this.userInfo.tenant_id,hostUrl:window.location.origin+"/"});case 30:if(u=e.sent,d=u.data,p=d.result,h=d.msg,1e3!==d.status){e.next=44;break}return this.ruleForm.api="".concat(p.apiDataInfo.apiServeData.note,"(").concat(p.apiDataInfo.apiServeData.name,")"),(m=Object(b.cloneDeep)(p.apiDataInfo.apiServeDataRequestParamList))?(m.length<1&&(this.requstRemark="暂无数据"),f=[],m.forEach((function(e){if("appKey"!==e.name&&"isAll"!==e.name){var t=D({},e,{showValue:"",value:"",customValue:""});f.push(Object(b.cloneDeep)(t))}})),this.ruleForm.requestParamList=f):this.requstRemark="暂无数据",(g=Object(b.cloneDeep)(p.apiDataInfo.apiServeDataReturnParamList))?(v=[],g.forEach((function(e){var t={};t.label="".concat(e.name,"(").concat(e.note,")"),t.value="".concat(e.name),t.isShow=!0,v.push(t)})),this.options=v):this.options=[],e.abrupt("return");case 44:return e.abrupt("return",this.$message.error(h));case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(0);case 50:case"end":return e.stop()}}),e,this,[[0,47]])})));return function(){return e.apply(this,arguments)}}(),changeApiForm:function(){this.$refs.valueSelect.clearData(),this.ruleForm.requestParamList=[],this.requstRemark="请选择接口",this.options=[],this.ruleForm.picture="",this.ruleForm.issuer="",this.ruleForm.releaseTime="",this.ruleForm.JumpSite="",this.ruleForm.content="",this.ruleForm.headline=""},clearInfo:function(){this.ruleForm.requestParamList=[],this.requstRemark="请选择接口",this.options=[],this.ruleForm.picture="",this.ruleForm.issuer="",this.ruleForm.releaseTime="",this.ruleForm.JumpSite="",this.ruleForm.content="",this.ruleForm.headline=""},getRolelist:function(){var e=this,t=[];this.roleTags=[],this.roleTree.forEach((function(e){e.children.forEach((function(e){t.push(e)}))})),this.rowData.role_id.split(",").forEach((function(a){var r=t.map((function(e){if(e.roleId===a)return{id:e.roleId,name:e.roleName}}));(r=r.filter((function(e){return e}))).forEach((function(t){return e.roleTags.push(t)}))}))},handleRoleClose:function(e){var t=this.roleTags;this.roleTags=t.filter((function(t){return t!==e}))},addTags:function(e){var t=this;if(this.roleTreeDialogVisible=!0,this.roleOrlabel=!0,this.roleTags.length>0){var a=this.roleTags.map((function(e){return e.id}));this.$nextTick((function(){t.$refs.roleTree.setCheckedKeys(a)}))}},getCheckedKeys:function(e){var t=this.$refs[e].getCheckedNodes();if(this.roleOrlabel){var a=t.map((function(e){if(e.roleId)return{name:e.roleName,id:e.roleId}}));this.roleTags=a.filter((function(e){return e})),this.roleTreeDialogVisible=!1}},goBack:function(){this.$emit("fatherMethod","adhibitionJPG")},validateValue:function(e,t,a){this.countNum||t||(this.countNum+=1,a&&this.$message.error(a))},commit:function(){var e=this;this.countNum=0,this.$nextTick((function(){e.$refs.ruleForm.validate((function(t){if(!t)return!1;e.ruleForm.JumpSite||e.ruleForm.content?(e.countNum=1,e.noticeSpec="",e.noticeType=1,e.agreeContent="保存",e.agreeContentTwo="保存并立即同步",e.noticeTitle="提示",e.noitceContent="请选择保存方式，若选择【保存并立即同步】资讯到本地，请在10分钟后，前往用户端查看具体资讯",e.noticeModal=!0):e.$message.error("内容和详情链接字段至少选择一个")}))}))},goReset:function(){this.resetForm()},resetForm:function(){var e=this,t=Object(c.a)({name:"managementAPI",type:"session"});this.Rowid=t.id,t.apiServeDataId&&"API"!=t.sourceType?(this.id=t.apiServeDataId,this.ruleForm.apiForm="SERVICE_API"==t.sourceType?"2":"1",Promise.all([this.itemDetail(),this.getParamTypeList()]).then((function(t){e.getApiFieldMapping()}))):(this.$refs.ruleForm.clearValidate(),this.changeApiForm(),this.getParamTypeList())},updateData:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(t){var a,r,i,n,o,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,a=[],Object(b.cloneDeep)(this.ruleForm.requestParamList).forEach((function(e){var t={};"pageSize"==e.name?(t.newsSectionId=c.Rowid,t.originalField=e.name,t.mapping="PAGE_SIZE",t.paramType="PARAM",a.push(t)):(t.newsSectionId=c.Rowid,t.originalField=e.name,t.mapping=e.showValue,t.paramType="PARAM",t.custom_value=e.customValue,a.push(t))})),a.push({newsSectionId:this.Rowid,originalField:"title",mapping:this.ruleForm.headline,paramType:"CONTENT"}),a.push({newsSectionId:this.Rowid,originalField:"content",mapping:this.ruleForm.content,paramType:"CONTENT"}),a.push({newsSectionId:this.Rowid,originalField:"url",mapping:this.ruleForm.JumpSite,paramType:"CONTENT"}),a.push({newsSectionId:this.Rowid,originalField:"publishDate",mapping:this.ruleForm.releaseTime,paramType:"CONTENT"}),a.push({newsSectionId:this.Rowid,originalField:"publisher",mapping:this.ruleForm.issuer,paramType:"CONTENT"}),a.push({newsSectionId:this.Rowid,originalField:"img",mapping:this.ruleForm.picture,paramType:"CONTENT"}),e.next=13,Object(s.m)({newsSectionId:this.Rowid,appDataId:this.id,fieldMappingList:a,sourceType:"1"==this.ruleForm.apiForm?"DATA_API":"SERVICE_API",synTime:this.ruleForm.synTime,type:t,lastKeepRecentDays:this.ruleForm.lastKeepRecentDays});case 13:if(r=e.sent,i=r.data,i.result,n=i.msg,o=i.status,this.noticeModal=!1,1e3!==o){e.next=25;break}return this.$message.success("操作成功"),this.goBack(),this.changeApiForm(),e.abrupt("return");case 25:return e.abrupt("return",this.$message.error(n));case 28:e.prev=28,e.t0=e.catch(1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(t){return e.apply(this,arguments)}}(),deleteRowConfirm:function(e,t){this.deleteRow(t)},deleteRow:function(e){this.currentTableData.splice(e,1)},updateStatus:function(e,t){"1"!==e.openStatus?this.$set(this.currentTableData[t],"openStatus","1"):this.$set(this.currentTableData[t],"openStatus","2")},addData:function(e){var t=Object(m.a)(this.currentTableData),a=[],r=[];e.forEach((function(e,i){var n=t.find((function(t){return t.serviceId===e.serviceId}));void 0!==n?r.push(n):a.push(e)})),a.reverse(),this.currentTableData=[].concat(a,r),this.closeAddModal()},closeAddModal:function(){this.addModalVisible=!1},openAddDialog:function(){this.addModalVisible=!0},rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;f.a.create(e,{onEnd:function(e){var a=e.newIndex,r=e.oldIndex,i=t.currentTableData.splice(r,1)[0];t.currentTableData.splice(a,0,i);var n=Object(m.a)(t.currentTableData);t.currentTableData=[],t.$nextTick((function(){t.currentTableData=Object(m.a)(n)}))}})},closeNotice:function(){this.noticeModal=!1},copyUrl:function(e,t){var a=this;document.addEventListener("copy",(function r(i){i.preventDefault(),i.clipboardData.setData("text/plain",e+t),a.$message.success("操作成功"),document.removeEventListener("copy",r)})),document.execCommand("copy")},changeComponent:function(){this.$emit("changeComponent","homePage")}}},x={name:"YXindex",data:function(){return{labelName:"adhibitionJPG",OSfailoverId:""}},components:{adhibitionJPG:h,AlumniOpen:C,AlumniDHTML:S,AlumniPact:(a("a89f"),Object(p.a)(I,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third guanLiApi"},[a("div",{staticClass:"third-formOne"},[a("div",{staticClass:"formOne-btn"},[a("div",{staticClass:"btn-left"},[a("span",{staticClass:"left-back-icon",on:{click:e.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),a("span",{staticClass:"left-back-title"},[e._v("返回")])]),e._m(0),a("span",{staticClass:"left-back-content"},[e._v(e._s(e.apiName)+"/管理API")])]),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{directives:[{name:"el-disabel-repeat-click",rawName:"v-el-disabel-repeat-click"}],staticClass:"btn-two",attrs:{type:"primary"},on:{click:e.commit}},[e._v("保存")])],1)]),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"86px","show-message":!1},on:{validate:e.validateValue}},[a("div",{staticClass:"formOne-forms"},[a("div",{staticClass:"forms-one",staticStyle:{"margin-top":"57px"}},[a("div",{staticClass:"one-title"},[a("div",{staticClass:"title-left"},[a("span",{staticClass:"left-icon"},[a("i",{staticClass:"el-icon-s-operation"})]),a("span",{staticClass:"left-content"},[e._v("接口访问信息")])])]),a("div",{staticClass:"one-list"},[a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"接口来源",prop:"apiForm"}},[a("el-radio-group",{on:{change:e.changeApiForm},model:{value:e.ruleForm.apiForm,callback:function(t){e.$set(e.ruleForm,"apiForm",t)},expression:"ruleForm.apiForm"}},[a("el-radio",{attrs:{label:"1"}},[e._v("数据总线")]),a("el-radio",{attrs:{label:"2"}},[e._v("服务总线")])],1)],1),a("div",{staticClass:"list-one-line-list"},[a("el-form-item",{attrs:{label:"接口",prop:"api"}},[a("key-value-select-2",{ref:"valueSelect",staticStyle:{display:"inline-block"},attrs:{className:"list-input",placeholder:"请先输入接口中文名称再选择",autoSearch:!0,apiForm:e.ruleForm.apiForm,selectedID:e.id,dictProp:{data:"result.data",label:"note",value:"id"},openSearch:!0,isNeedCash:!1,dictUrl:1==e.ruleForm.apiForm?"/api/blade-workbench/eduApiServeData/list":"/api/blade-workbench/eduApiServe/list"},on:{clearInfo:e.clearInfo,goReset:e.goReset,SelectLabel:function(t){e.ruleForm.api=t},changeInfoData:e.changeInfoData},model:{value:e.ruleForm.api,callback:function(t){e.$set(e.ruleForm,"api",t)},expression:"ruleForm.api"}}),e.isVB?a("span",{staticStyle:{"font-size":"10px","margin-left":"10px",color:"#ff4d4f"}},[e._v("若切换接口，已配置接口信息都将清空")]):e._e()],1)],1),a("el-form-item",{attrs:{label:"访问参数",prop:"canShu",rules:{required:!0,message:"请选择刷新时间",trigger:"change"}}},[a("div",{staticStyle:{"font-size":"12px",color:"rgba(174, 174, 180, 0.847058823529412)"}},[a("span",{style:{visibility:e.isVB?"hidden":"visible"}},[e._v(e._s(e.requstRemark))])]),e._l(e.ruleForm.requestParamList,(function(t,r){return a("div",{key:r},[a("div",[a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"305px"}},[a("span",[e._v("参数名称")]),a("span",{staticStyle:{color:"rgba(174, 174, 180, 0.847058823529412)","padding-left":"10px"}},[e._v(e._s(t.name)),a("span",[e._v("("+e._s(t.note)+")")])])]),"pageSize"==t.name?a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"316px"}},[a("el-form-item",{attrs:{label:"每页数据值"}},[a("el-input",{staticClass:"list-input",attrs:{disabled:"",maxlength:8},model:{value:e.ruleForm.shujuzhi,callback:function(t){e.$set(e.ruleForm,"shujuzhi","string"==typeof t?t.trim():t)},expression:"ruleForm.shujuzhi"}})],1)],1):a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"396px"}},[a("el-form-item",{attrs:{label:"参数映射值",prop:"requestParamList."+r+".showValue",rules:{required:!0,message:"请选择"+t.name+"参数映射值",trigger:"change"}}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},model:{value:t.showValue,callback:function(a){e.$set(t,"showValue",a)},expression:"reply.showValue"}},e._l(e.options2,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),"CUSTOM"===t.showValue?a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"316px"}},["CUSTOM"===t.showValue?a("el-form-item",{attrs:{label:"自定义值",prop:"requestParamList."+r+".customValue",rules:{required:!0,message:"请输入自定义值",trigger:"blur"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:60,placeholder:"请输入"},model:{value:t.customValue,callback:function(a){e.$set(t,"customValue","string"==typeof a?a.trim():a)},expression:"reply.customValue"}})],1):e._e()],1):e._e()])])}))],2)],1)])]),a("div",{staticClass:"forms-one"},[a("div",{staticClass:"one-title"},[a("div",{staticClass:"title-left"},[a("span",{staticClass:"left-icon"},[a("i",{staticClass:"el-icon-s-operation"})]),a("span",{staticClass:"left-content"},[e._v("资讯内容展示值字段映射"),a("span",{staticStyle:{"font-weight":"normal","font-size":"12px",color:"rgba(174, 174, 180, 0.847058823529412)"}},[e._v("（请配置接口访问信息后选择值字段）")])])])]),a("div",{staticClass:"one-list"},[a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"标题",prop:"headline",rules:{required:!0,message:"请输入标题",trigger:"blur"}}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.headline)}},model:{value:e.ruleForm.headline,callback:function(t){e.$set(e.ruleForm,"headline",t)},expression:"ruleForm.headline"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"标题最大长度限制为255字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1),a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"内容"}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.content)}},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"内容最大长度限制为10000字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1),a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"详情链接"}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.JumpSite)}},model:{value:e.ruleForm.JumpSite,callback:function(t){e.$set(e.ruleForm,"JumpSite",t)},expression:"ruleForm.JumpSite"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"详情链接最大长度限制为255字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1)]),a("div",{staticClass:"one-list"},[a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"发布时间",prop:"releaseTime",rules:{required:!0,message:"请输入发布时间",trigger:"blur"}}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.releaseTime)}},model:{value:e.ruleForm.releaseTime,callback:function(t){e.$set(e.ruleForm,"releaseTime",t)},expression:"ruleForm.releaseTime"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布时间最大长度限制为32字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1),a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"发布人",prop:"issuer",rules:{required:!0,message:"请输入发布人",trigger:"blur"}}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.issuer)}},model:{value:e.ruleForm.issuer,callback:function(t){e.$set(e.ruleForm,"issuer",t)},expression:"ruleForm.issuer"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布人最大长度限制为32字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1),a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"图片"}},[a("el-select",{staticClass:"list-input",attrs:{placeholder:"请选择"},nativeOn:{click:function(t){return e.ownerCompanyClick(e.ruleForm.picture)}},model:{value:e.ruleForm.picture,callback:function(t){e.$set(e.ruleForm,"picture",t)},expression:"ruleForm.picture"}},e._l(e.options,(function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图片最大长度限制为1000字符",placement:"top"}},[a("i",{staticClass:"sp icontishishuoming",staticStyle:{"padding-left":"5px","font-size":"12px"}})])],1)],1)])]),a("div",{staticClass:"forms-one"},[a("div",{staticClass:"one-title"},[a("div",{staticClass:"title-left"},[a("span",{staticClass:"left-icon"},[a("i",{staticClass:"el-icon-s-operation"})]),a("span",{staticClass:"left-content"},[e._v("资讯时效性配置\n                ")])])]),a("div",{staticClass:"one-list"},[a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"自动同步时间",prop:"synTime",rules:{required:!0,message:"请输入自动同步时间",trigger:"blur"}}},[a("el-time-select",{staticClass:"list-input baseData-input-number",attrs:{"picker-options":{start:"00:00",step:"01:00",end:"24:59"},placeholder:"请选择每日同步时间"},model:{value:e.ruleForm.synTime,callback:function(t){e.$set(e.ruleForm,"synTime",t)},expression:"ruleForm.synTime"}})],1)],1)]),a("div",{staticClass:"one-list"},[a("div",{staticClass:"list-one-line"},[a("el-form-item",{attrs:{label:"本地保留最近",prop:"lastKeepRecentDays",rules:{required:!0,message:"请输入本地保留时间",trigger:"blur"}}},[a("el-input-number",{staticClass:"list-input baseData-input-number",attrs:{controls:!1,min:10,max:730,"step-strictly":"",placeholder:"请输入10-730的正整数"},model:{value:e.ruleForm.lastKeepRecentDays,callback:function(t){e.$set(e.ruleForm,"lastKeepRecentDays",t)},expression:"ruleForm.lastKeepRecentDays"}}),a("span",{staticStyle:{"font-size":"12px",color:"#2e4057","margin-left":"3px"}},[e._v("天内的资讯")]),a("div",{staticStyle:{"font-size":"12px",color:"#76838f"}},[e._v("超出天数的资讯将会在每次同步后自动删除，天数以发布时间为准，发布时间格式请按照 年-月-日的标准格式，例如 2021.10.10")])],1)],1)])])])])],1),a("notice-modal",{attrs:{noticeModalVisible:e.noticeModal,noticeTitle:e.noticeTitle,noticeSpec:e.noticeSpec,isError:e.isError,noticeType:e.noticeType,btnAgree:e.agreeContent,btnAgreeTwo:e.agreeContentTwo,noticeContent:e.noitceContent},on:{noticeModalClose:e.closeNotice,noticeModalAgree:e.agreeNotice,agreeNoticeTwo:e.agreeNoticeTwo}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"left-back-shu"},[t("span",{staticClass:"left-back-shu-content"})])}],!1,null,null,null)).exports},created:function(){},methods:{goBackHome:function(){this.labelName="adhibitionJPG"},fatherMethod:function(e){this.labelName=e}}},_=Object(p.a)(x,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third"},[a(e.labelName,{ref:e.labelName,tag:"component",attrs:{ID:e.OSfailoverId},on:{backHome:e.goBackHome,fatherMethod:e.fatherMethod}})],1)}),[],!1,null,null,null);t.default=_.exports},be89:function(e,t,a){"use strict";var r=a("8cf1");a.n(r).a},cc57:function(e,t,a){},d361:function(e,t,a){"use strict";var r=a("cc57");a.n(r).a},f592:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4b4d05ab.f7b82b76.js.map