(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66cfc245"],{"087d":function(e,t,n){"use strict";var a=n("a531");n.n(a).a},a531:function(e,t,n){},d4e6:function(e,t,n){"use strict";n.r(t);var a=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),i=n("c810"),r=(n("da8d"),{name:"thirdThree",data:function(){return{identity:"TEACHER",valNum:0,importModal:!1,totalLimit:0,reserveCount:0,verifiedCount:0,radio:1,namingRule:1,imgFormat:1,input:"",outImgNum:0,labelPosition:"right",outputModalImg:!1,outputModalHuJiImg:!1,mzdata:[],imgSrc:"",ImgDialog:!1,LBname:"",outputModal:!1,isJS:!0,checkID:"",isInformation:!0,loading:!1,noticeSpec:"",noticeType:1,agreeContent:"确定",noticeTitle:"提示",noitceContent:"",noticeModal:!1,pageSize:40,pageNum:1,totalNum:0,tableData:[],formInline:{otherParam:"",name:"",keyId:"",ksh:"",hierarchy:"",campus:"",dept:[],deptIdList:[],grade:"",LastexecutionTime:[],startTime:"",endTime:"",cascade:[],college:null,major:null,className:null},selectArrList:[],nowSelectArr:[],isDeleteList:!1,options:[],defaultProps:{checkStrictly:!0,value:"deptId",label:"deptName",children:"children",leaf:"leaf"},newYXB:[],schoolList:[],pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()||e.getTime()<16094304e5}},outputModalZip:!1,ColumnList:[{column:"工号",key:"keyId",needKeyValue:!1,caseKey:"keyId"},{column:"姓名",key:"name",needKeyValue:!1,caseKey:"name"},{column:"性别",key:"sex",needKeyValue:!0,actionUrl:"/api/blade-workbench/dict/dictionary?code=sex",caseKey:"sex"},{column:"校区",key:"campus",needKeyValue:!1,caseKey:"campus"},{column:"部门",key:"dept",needKeyValue:!1,caseKey:"dept"},{column:"照片",key:"imgUrl",needKeyValue:!1,isImgUrl:!0,caseKey:"imgUrl"},{column:"上传时间",key:"uploadTime",needKeyValue:!1,caseKey:"uploadTime"},{column:"手机号",key:"tel",needKeyValue:!1,caseKey:"tel"},{column:"备用号码",key:"backupNumber",needKeyValue:!1,caseKey:"backupNumber"}],imgSource:2}},created:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.roleStuList(),e.next=3,this.getUnitList();case 3:this.getImgSource();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{screenPhoto:function(){"noPhoto"==this.formInline.otherParam?this.formInline.otherParam="":this.formInline.otherParam="noPhoto",this.roleStuList()},traverseArr:function(e){var t=this;e&&"null"!=e?e.forEach((function(e){t.formInline.deptIdList.push(e.deptId),e.children&&t.traverseArr(e.children)})):this.formInline.deptIdList=[]},getImgSource:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,a,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={identity:this.identity},e.next=4,this.$store.dispatch("getConfig",t);case 4:n=e.sent,a=n.data,i=a.status,r=a.msg,s=a.result,1e3!=i?this.$message({type:"error",message:r}):this.imgSource=s.picUploadType,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),checkboxSelect:function(e,t){return!!e.imgUrl},handleChange:function(e){e.length>0?this.formInline.college=e[0]:e.length>1?this.formInline.major=e[1]:e.length>2&&(this.formInline.className=e[2])},deleteItem:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t||""!==this.checkID){e.next=2;break}return e.abrupt("return",this.$message.error("请选择数据"));case 2:this.agreeNotice=function(){n.noticeModal=!1,1==t?n.deleteImg(n.checkID):2==t?n.deleteAllImg():n.deleteImg(t.studentId)},this.noitceContent="确定删除吗？",this.noticeSpec=1==this.imgSource?"删除照片后需用户重新上传，":"删除照片后需重新上传，",this.noticeModal=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),deleteAllImg:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,a,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={identity:this.identity},e.next=4,this.$store.dispatch("deleteAllImg",t);case 4:n=e.sent,a=n.data,i=a.status,r=a.msg,a.result,1e3!=i?this.$message({type:"error",message:r}):(this.$message.success("删除成功"),this.roleStuList()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),deleteImg:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(t){var n,a,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={ids:t,identity:this.identity},e.next=4,this.$store.dispatch("deleteImg",n);case 4:a=e.sent,i=a.data,r=i.status,s=i.msg,i.result,1e3!=r?this.$message({type:"error",message:s}):(this.$message.success("删除成功"),this.roleStuList()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children&&(e[t].children.length<1?e[t].children=void 0:this.getTreeData(e[t].children));return e},getUnitList:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getEduDeptInfoTree",{tenantId:this.$store.state.user.tenantId});case 2:1e3==(t=e.sent).data.status&&(this.options=this.getTreeData(t.data.result));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getYjdrNum:function(){var e=this;Object(i.f)("/api/blade-faceCertification/api/faceBio/verifyRecord/registrationListByDate").then((function(t){var n=t.data;1e3===n.status?(e.valNum=0,n.result.forEach((function(t){e.valNum+=t.count}))):e.$message.error(n.msg)}))},addMember:function(){this.importModal=!0},closeImport:function(){this.importModal=!1},checkDate:function(){},viewImage:function(e){this.imgSrc=e+"?"+(new Date).getTime(),this.ImgDialog=!0},daoChuShuJu:function(){this.LBname="核验记录",this.outputModal=!0},outputData:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.LBname="核验记录",this.outputModalZip=!0;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),closeOutPut:function(){this.outputModal=!1},closeOutPutZip:function(){this.outputModalZip=!1},daoruSuccess:function(){this.resetForm("formInline")},searchInput:function(){this.pageNum=1,this.roleStuList()},resetInput:function(){this.hignSearchRes="",this.pageNum=1,this.formInline={otherParam:"",name:"",keyId:"",ksh:"",hierarchy:"",campus:"",dept:[],deptIdList:[],grade:"",LastexecutionTime:[],startTime:"",endTime:"",cascade:[],college:null,major:null,className:null},this.roleStuList()},handleSelectChange:function(e){this.selectArrList=[];for(var t=0;t<=e.length-1;t++)this.selectArrList.push(e[t].studentId);this.checkID=this.selectArrList.join(",")},handleSelectAll:function(e){this.checkClassList=[];for(var t=0;t<=e.length-1;t++)this.checkClassList.push(e[t].studentId);this.checkID=this.checkClassList.join(",")},agreeNotice:function(){},closeNotice:function(){this.noticeModal=!1},handleSizeChange:function(e){this.pageNum=1,this.pageSize=e,this.roleStuList()},handleCurrentChange:function(e){this.pageNum=e,this.roleStuList()},roleStuList:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,a,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,!(this.formInline.dept.length>0)){e.next=8;break}return t={identity:this.identity,deptId:this.formInline.dept[this.formInline.dept.length-1],tenantId:this.$store.state.user.tenantId},e.next=6,this.$store.dispatch("getEduDeptInfoTreeByDeptId",t);case 6:1e3!=(n=e.sent).data.status?this.$message({type:"error",message:n.data.msg}):(this.formInline.deptIdList=[],this.traverseArr(n.data.result));case 8:return e.next=11,this.$store.dispatch("userList",{identity:this.identity,otherParam:this.formInline.otherParam,name:this.formInline.name.trim(),keyId:this.formInline.keyId.trim(),ksh:this.formInline.ksh.trim(),campus:this.formInline.campus,dept:this.formInline.dept,deptIdList:this.formInline.deptIdList,hierarchy:this.formInline.hierarchy,grade:this.formInline.grade,startTime:this.formInline.LastexecutionTime?this.formInline.LastexecutionTime[0]:"",endTime:this.formInline.LastexecutionTime?this.formInline.LastexecutionTime[1]:"",cascade:this.formInline.cascade,college:this.formInline.cascade.length>0?this.formInline.cascade[0]:null,major:this.formInline.cascade.length>1?this.formInline.cascade[1]:null,className:this.formInline.cascade.length>2?this.formInline.cascade[2]:null,pageIndex:this.pageNum,pageSize:this.pageSize});case 11:a=e.sent,i=a.data,r=i.status,i.msg,s=i.result,this.loading=!1,1e3===r?0!==s.data.length?(this.tableData=s.data,this.totalNum=s.count,this.reserveCount=s.numberImg,this.verifiedCount=s.number,this.totalLimit=s.total):1!==this.pageNum?(this.pageNum-=1,this.roleStuList()):(this.tableData=[],this.totalNum=0):(this.tableData=[],this.totalNum=0);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}}),s=(n("087d"),n("2877")),o={name:"YXindex",data:function(){return{labelName:"TEACHER",OSfailoverId:""}},components:{TEACHER:Object(s.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TEACHER"},[n("div",{staticClass:"third"},[n("div",{staticClass:"third-rea"},[n("div",{staticClass:"third-btn"},[n("div",{staticClass:"btn-left"},[e._v("检索条件")]),n("div",{staticClass:"btn-right"},[n("el-button",{staticClass:"btn-two",attrs:{type:"primary"},on:{click:e.searchInput}},[e._v("查询")]),n("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:e.resetInput}},[e._v("重置")])],1)]),n("div",{staticClass:"third-search"},[n("el-form",{attrs:{inline:!0,model:e.formInline,"label-width":"76px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInput(t)}}},[n("div",{staticClass:"search-row"},[n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name","string"==typeof t?t.trim():t)},expression:"formInline.name"}})],1)],1),n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"工号",prop:"keyId"}},[n("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},model:{value:e.formInline.keyId,callback:function(t){e.$set(e.formInline,"keyId","string"==typeof t?t.trim():t)},expression:"formInline.keyId"}})],1)],1),n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"校区",prop:"campus"}},[n("key-value-select",{attrs:{className:"item-input",isNeedAll:!0,placeholder:"请选择",methods:"post",dictProp:{data:"result",label:"dictValue",value:"dictKey"},dictUrl:"/api/blade-workbench/eduCampusInfo/getCampusNameAndId"},model:{value:e.formInline.campus,callback:function(t){e.$set(e.formInline,"campus",t)},expression:"formInline.campus"}})],1)],1),n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"部门",prop:"dept"}},[n("el-cascader",{staticClass:"item-input",attrs:{"show-all-levels":!0,options:e.options,props:e.defaultProps},model:{value:e.formInline.dept,callback:function(t){e.$set(e.formInline,"dept",t)},expression:"formInline.dept"}})],1)],1)]),n("div",{staticClass:"search-row"},[n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"是否有照片",prop:"otherParam"}},[n("key-value-select",{attrs:{className:"item-input",isNeedAll:!0,placeholder:"请选择",methods:"post",isNeedCash:!1,dict:[{label:"是",value:"hasPhoto"},{label:"否",value:"noPhoto"}]},model:{value:e.formInline.otherParam,callback:function(t){e.$set(e.formInline,"otherParam",t)},expression:"formInline.otherParam"}})],1)],1),n("div",{staticClass:"row-item"},[n("el-form-item",{attrs:{label:"上传时间",prop:"time"}},[n("el-date-picker",{staticClass:"list-input Isdaterange",staticStyle:{width:"216px","padding-left":"15px","padding-right":"0"},attrs:{type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions0},on:{change:e.checkDate},model:{value:e.formInline.LastexecutionTime,callback:function(t){e.$set(e.formInline,"LastexecutionTime",t)},expression:"formInline.LastexecutionTime"}})],1)],1)])])],1)]),n("div",{staticClass:"third-one"},[n("div",{staticClass:"third-do-btn"},[n("div",{staticClass:"do-btn-left",staticStyle:{width:"600px"}},[n("el-button",{staticClass:"do-btn-four",attrs:{type:"default",icon:"el-icon-download"},on:{click:e.addMember}},[e._v("导入照片")]),n("el-button",{staticClass:"do-btn-two",attrs:{type:"default",icon:"el-icon-upload2"},on:{click:e.outputData}},[e._v("导出照片")]),n("el-button",{staticClass:"do-btn-two",attrs:{type:"default",icon:"el-icon-upload2"},on:{click:e.daoChuShuJu}},[e._v("导出没有照片的用户")]),n("el-button",{staticClass:"do-btn-two",attrs:{type:"default",icon:"el-icon-delete"},on:{click:function(t){return e.deleteItem(1)}}},[e._v("删除照片")]),n("el-button",{staticClass:"do-btn-two",attrs:{type:"default",icon:"el-icon-delete"},on:{click:function(t){return e.deleteItem(2)}}},[e._v("删除所有教工的照片")])],1),e.isInformation?n("div",{staticClass:"do-btn-rightA",staticStyle:{width:"calc(100% - 600px)","text-align":"right",color:"#76838f"}},[n("p",[e._v("\n            总计："),n("span",[e._v(e._s(e.totalLimit))]),e._v(" ，有照片："),n("span",[e._v(e._s(e.reserveCount)+"\n            ")]),e._v("\n            ，无照片:\n            "),n("span",{staticClass:"error",on:{click:e.screenPhoto}},[e._v(e._s(e.verifiedCount)+"\n            ")])])]):e._e()]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"studentId",staticClass:"third-tableThree messageHistory-threeLine",attrs:{"max-height":e.getMaxHeight(230),data:e.tableData,"row-key":"studentId",border:"",stripe:""},on:{"selection-change":e.handleSelectChange,"select-all":e.handleSelectAll}},[n("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxSelect}}),e._l(e.ColumnList,(function(t,a){return[t.needKeyValue?n("el-table-column",{key:a,attrs:{"min-width":"100px",prop:t.key,label:t.column,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(e){return[n("key-value-span",{attrs:{dict:t.dict,value:e.row[t.key],dictUrl:t.actionUrl}})]}}],null,!0)}):t.isImgUrl?n("el-table-column",{key:a,attrs:{"min-width":"100px",prop:t.key,label:t.column,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.imgUrl?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.viewImage(t.row.imgUrl)}}},[e._v("\n                查看\n              ")]):n("span",[e._v("暂无")])]}}],null,!0)}):n("el-table-column",{key:a,attrs:{"min-width":"100px",prop:t.key,label:t.column,"show-overflow-tooltip":!0}})]})),n("el-table-column",{attrs:{"min-width":"100px",prop:"address",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.imgUrl?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteItem(t.row)}}},[e._v("删除照片")]):e._e()]}}])})],2),n("div",{staticClass:"third-page"},[n("el-pagination",{attrs:{"current-page":e.pageNum,background:"","page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),n("notice-modal",{attrs:{noticeModalVisible:e.noticeModal,noticeTitle:e.noticeTitle,noticeSpec:e.noticeSpec,noticeType:e.noticeType,btnAgree:e.agreeContent,noticeContent:e.noitceContent},on:{noticeModalClose:e.closeNotice,noticeModalAgree:e.agreeNotice}}),n("pull-Out-New",{attrs:{outputModal:e.outputModal,isJS:e.isJS,isGX:!1,LBName:"教工",identity:e.identity,requestModel:e.formInline,checkID:e.checkID,biaotouURL:"/api/blade-platform/userImg/excel/ExportField",daochuURL:"/api/blade-platform/userImg/excel/export",lunxun:"/api/blade-platform/userImg/excel/exportStatus",ExportCountURL:"/api/blade-platform/userImg/excel/exportCount"},on:{closeNewTask:e.closeOutPut}}),n("pull-Out-Zip",{attrs:{outputModal:e.outputModalZip,identity:e.identity,LBName:"教工照片",formInline:e.formInline,checkID:e.checkID,daochuURL:"/api/blade-platform/userImg/exportImg",lunxun:"/api/blade-platform/userImg/excel/exportPhoto",ExportCountURL:"/api/blade-platform/userImg/exportImgCount"},on:{closeNewTask:e.closeOutPutZip}}),n("pushInfoNewZip",{attrs:{importModal:e.importModal,identity:e.identity,IngURL:"/api/blade-platform/userImg/importImg/polling",upFailURL:"/api/blade-platform/userImg/downloadErrorExcel",DaoruURL:"/api/blade-platform/userImg/importImg",modalTitle:"上传照片"},on:{closeNewTask:e.closeImport,daoruSuccess:function(){e.roleStuList()}}}),n("preview-modal",{attrs:{previewModal:e.ImgDialog,previewImageUrl:e.imgSrc},on:{previewClose:function(){e.ImgDialog=!1}}})],1)])}),[],!1,null,null,null).exports},created:function(){},methods:{goBackHome:function(){this.labelName="TEACHER"}}},l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"third"},[n(e.labelName,{ref:e.labelName,tag:"component",attrs:{ID:e.OSfailoverId},on:{backHome:e.goBackHome}})],1)}),[],!1,null,null,null);t.default=l.exports}}]);
//# sourceMappingURL=chunk-66cfc245.7a417c1e.js.map