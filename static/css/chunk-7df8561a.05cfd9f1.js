(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7df8561a"],{"21f3":function(e,t,a){},"5b76":function(e,t,a){"use strict";a.r(t);var i=(a("386d"),a("456d"),a("ac6a"),a("2f62"),a("8a23"),a("da6f")),n={components:{keyValueSelect:a("44f4").a},data:function(){return{searching:!0,hignModal:!1,formInline:{nickname:"",campusName:"",lableName:"",time:[],content:""},hignSearchRes:"",alumniData:[],loadingBtn:!1,uploadMsg:"加载更多...",shieldModal:!1,orderConfig:"",tableRow:[{column:"昵称",key:"nickname",needKeyValue:!1,caseKey:"pu.nickname"},{column:"校区",key:"campusName",needKeyValue:!1,caseKey:" pu.campus_name"},{column:"标签",key:"lableName",needKeyValue:!1,caseKey:"pl.content"},{column:"发布时间",key:"createTime",needKeyValue:!1,caseKey:"pt.create_time"},{column:"内容",key:"content",needKeyValue:!1,caseKey:"pt.content"}],shieldId:"",pageSize:10,pageIndex:1}},created:function(){var e=this.getSessonValue("dynamicDisplayFied");e&&(this.orderConfig=e),this.selectList()},methods:{toHignSearch:function(e){this.hignSearchRes=e,this.pageIndex=1,this.hignModal=!1,this.selectList()},getSessonValue:function(e){return Object(i.a)({name:e,type:"session"})},selectList:function(){var e=this;try{var t=this.orderConfig;Array.isArray(this.orderConfig)&&(t=this.orderConfig.join(","));var a=this.formInline.time[0]?this.formInline.time[0]:"",i=this.formInline.time[1]?this.formInline.time[1]:"",n={nickname:this.formInline.nickname,campusName:this.formInline.campusName,lableName:this.formInline.lableName,startTime:a,endTime:i,content:this.formInline.content,pageIndex:this.pageIndex,pageSize:this.pageSize,dataSortStr:t,advancedSearch:this.hignSearchRes};this.$store.dispatch("getDynamicList",n).then((function(t){var a=t.data;1e3===a.status?(e.alumniData=a.result.records,e.tot=a.result.total):(e.alumniData=[],e.tot=0),e.searching=!1}))}catch(e){this.searching=!1}},closeModal:function(){this.hignModal=!1},hignSearch:function(){this.hignModal=!0},search:function(){this.searching=!0,this.hignSearchRes="",this.pageIndex=1,this.selectList()},resetForm:function(e){var t=this;this.$refs[e].resetFields(),Object.keys(this.formInline).forEach((function(e){t.formInline[e]="time"===e?[]:""})),this.search()},getDataOrder:function(e){this.orderConfig=e,this.selectList()},uploadData:function(){var e=this,t=this.alumniData;this.loadingBtn=!0,this.pageIndex++;try{var a=this.orderConfig;Array.isArray(this.orderConfig)&&(a=this.orderConfig.join(","));var i=this.formInline.time[0]?this.formInline.time[0]:"",n=this.formInline.time[1]?this.formInline.time[1]:"",s={nickname:this.formInline.nickname,campusName:this.formInline.campusName,lableName:this.formInline.lableName,startTime:i,endTime:n,content:this.formInline.content,pageIndex:this.pageIndex,pageSize:this.pageSize,dataSortStr:a,advancedSearch:this.hignSearchRes};this.$store.dispatch("getDynamicList",s).then((function(a){var i=a.data;1e3===i.status?0===i.result.records.length?(e.pageIndex--,e.uploadMsg="没有更多数据了"):e.alumniData=t.concat(i.result.records):e.pageIndex--})).finally((function(){return e.loadingBtn=!1}))}catch(e){this.uploadMsg="加载失败，请重试"}},shieldMethods:function(e){this.shieldId=String(e),this.shieldModal=!0},cancelShieldModal:function(){this.shieldModal=!1},agreeToShield:function(e){var t=this;this.$store.dispatch("shieldDynamics",{id:this.shieldId,reportId:e.reason,type:0}).then((function(e){1e3===e.data.status&&(t.$message({message:"屏蔽成功！",type:"success"}),t.shieldModal=!1,t.search())}))},delDiscuss:function(e){this.shieldId=String(e),this.shieldModal=!0},detailsPage:function(e){this.$emit("toDetails",e)}}},s=(a("8ad7"),a("2877")),l={data:function(){return{loadingBtn:!1,uploadMsg:"加载更多...",info:{},alumniData:[],shieldModal:!1,selectReasonList:[],shieldId:"",pageIndex:1,pageSize:20}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=sessionStorage.getItem("detailsUserID");this.$store.dispatch("getUserDynamic",{userId:t,pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){if(1e3===t.data.status){var a=t.data.result;e.info=a.records,e.alumniData=a.records.dynamics,e.alumniData.forEach((function(t){t.campusName=e.info.campusName}))}}))},goBack:function(){"back"!=sessionStorage.getItem("goBack")?this.$emit("backHome"):this.$router.go(-1)},shieldMethods:function(e){this.shieldId=e,this.shieldModal=!0},cancelShieldModal:function(){this.shieldModal=!1},agreeToShield:function(e){var t=this;this.$store.dispatch("shieldDynamics",{id:this.shieldId,reportId:e.reason,type:0}).then((function(e){1e3===e.data.status?(t.$message({message:"屏蔽成功！",type:"success"}),t.getData(),t.shieldModal=!1):t.$message.error(e.data.msg)}))},delDiscuss:function(e){},uploadData:function(){var e=this,t=this.alumniData;this.loadingBtn=!0,this.pageIndex++;var a=sessionStorage.getItem("detailsUserID");this.$store.dispatch("getUserDynamic",{userId:a,pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(a){if(1e3===a.data.status){var i=a.data.result;0===i.records.dynamics.length?(e.pageIndex--,e.uploadMsg="没有更多数据了"):(e.alumniData=t.concat(i.records.dynamics),e.alumniData.forEach((function(e){e.campusName=i.campusName})))}else e.uploadMsg="没有更多数据了",e.pageIndex--})).finally((function(){return e.loadingBtn=!1}))}}},o={name:"dynamicMan",data:function(){return{labelName:"dynamicManIndex"}},components:{dynamicManIndex:Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.searching,expression:"searching"}]},[a("div",{staticClass:"third-rea"},[a("div",{staticClass:"third-btn"},[a("div",{staticClass:"btn-left"},[e._v("检索条件")]),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:function(t){return e.resetForm("formInline")}}},[e._v("重置")]),a("span",{staticClass:"btn-shu"}),a("el-button",{staticClass:"btn-four",attrs:{type:"default",icon:"el-icon-search"},on:{click:e.hignSearch}},[e._v("高级检索")])],1)]),a("div",{staticClass:"third-search"},[a("el-form",{ref:"formInline",attrs:{inline:!0,model:e.formInline,"label-width":"76px"}},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.formInline.nickname,callback:function(t){e.$set(e.formInline,"nickname","string"==typeof t?t.trim():t)},expression:"formInline.nickname"}})],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"所属校区",prop:"campusName"}},[a("key-value-select",{attrs:{className:"item-input",isNeedAll:!0,placeholder:"请选择",dictProp:{data:"result",label:"campusName",value:"campusName"},methods:"post",dictUrl:"/api/blade-platform/platformalumniaction/getCampusInfo"},model:{value:e.formInline.campusName,callback:function(t){e.$set(e.formInline,"campusName",t)},expression:"formInline.campusName"}})],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"标签",prop:"lableName"}},[a("key-value-select",{attrs:{className:"item-input",isNeedAll:!0,placeholder:"请选择",dictProp:{data:"result",label:"content",value:"content"},methods:"post",dictUrl:"/api/blade-platform/platformalumniaction/getLable"},model:{value:e.formInline.lableName,callback:function(t){e.$set(e.formInline,"lableName",t)},expression:"formInline.lableName"}})],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"发布时间",prop:"dataFrom"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","default-time":["00:00:00","23:59:59"]},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1)],1),a("div",{staticClass:"row-item"},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{staticClass:"item-input",attrs:{maxlength:30,placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.formInline.content,callback:function(t){e.$set(e.formInline,"content","string"==typeof t?t.trim():t)},expression:"formInline.content"}})],1)],1)])])],1)]),a("div",{staticClass:"third-one dynamic"},[a("div",{staticClass:"third-do-btn"},[a("div",{staticClass:"do-btn-right"},[a("div",{staticClass:"do-btn-hign-list"},[a("display-field",{attrs:{selectList:e.tableRow,sessionOriginalName:"dynamicDisplayFiedOrignal",sessionResultName:"dynamicDisplayFied"},on:{setDataOrder:e.getDataOrder}})],1)])])]),a("div",{staticClass:"dynamic-list"},[e._l(e.alumniData,(function(t,i){return a("alumni",{key:i,attrs:{data:t,showLine:i===e.alumniData.length-1},on:{shieldMethods:function(a){return e.shieldMethods(t.id)},detailsPage:e.detailsPage,delDiscuss:e.delDiscuss}})})),a("div",{staticClass:"uploadBtn"},[e.alumniData.length>0?a("el-button",{attrs:{plain:"",loading:e.loadingBtn},on:{click:e.uploadData}},[e._v(e._s(e.uploadMsg))]):a("div",{staticStyle:{"font-size":"14px"}},[e._v("没有更多数据了...")])],1)],2),a("hign-modal",{attrs:{hignModalVisible:e.hignModal,hignOneList:e.tableRow},on:{searchModal:e.toHignSearch,cancelModal:e.closeModal}}),a("shield-modal",{attrs:{shieldModalVisible:e.shieldModal},on:{agreeToShield:e.agreeToShield,cancelShieldModal:e.cancelShieldModal}})],1)}),[],!1,null,null,null).exports,dynamicDetails:(a("9ced"),Object(s.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third-formOne dynamicManage-details"},[a("div",{staticClass:"formOne-btn"},[a("div",{staticClass:"btn-left"},[a("span",{staticClass:"left-back-icon",on:{click:e.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),a("span",{staticClass:"left-back-title"},[e._v("返回")])]),e._m(0),a("span",{staticClass:"left-back-content"},[e._v("用户动态")])]),a("div",{staticClass:"btn-right"})]),a("div",{staticClass:"head-info",staticStyle:{"margin-top":"57px"}},[a("div",{staticClass:"item-title"},[a("div",{staticClass:"item-title__head"},[a("img",{attrs:{src:e.info.photo?e.info.photo:"img/ic_avatar.png",onerror:e.errorHeadImg,alt:""}})]),a("div",{staticClass:"item-title__name"},[a("h3",[e._v(e._s(e.info.nickName))]),a("span",[e._v(e._s(e.info.campusName))])])]),a("div",{staticClass:"info-box"},[a("span",[e._v("真实姓名："+e._s(e.info.realName))]),a("span",[e._v("学号/工号/账号："+e._s(e.info.account))]),a("span",[e._v("联系电话："+e._s(e.info.tel))]),a("div",[e._v("个性签名："+e._s(e.info.sign))])])]),a("div",{staticClass:"details-box"},[e._l(e.alumniData,(function(t,i){return a("alumni",{key:i,attrs:{data:t,showLine:i===e.alumniData.length-1},on:{shieldMethods:function(a){return e.shieldMethods(t.id)},delDiscuss:e.delDiscuss}})})),a("div",{staticClass:"uploadBtn"},[e.alumniData.length>0?a("el-button",{attrs:{plain:"",loading:e.loadingBtn},on:{click:e.uploadData}},[e._v(e._s(e.uploadMsg))]):a("div",{staticStyle:{"font-size":"14px"}},[e._v("没有更多数据了...")])],1)],2),a("shield-modal",{attrs:{shieldModalVisible:e.shieldModal,selectReasonList:e.selectReasonList},on:{agreeToShield:e.agreeToShield,cancelShieldModal:e.cancelShieldModal}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"left-back-shu"},[t("span",{staticClass:"left-back-shu-content"})])}],!1,null,null,null)).exports},created:function(){},methods:{goBackHome:function(){this.labelName="dynamicManIndex"},toDetails:function(e){sessionStorage.setItem("detailsUserID",e),this.labelName="dynamicDetails"}}},c=Object(s.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"third"},[a(e.labelName,{ref:e.labelName,tag:"component",on:{toDetails:e.toDetails,backHome:e.goBackHome}})],1)}),[],!1,null,null,null);t.default=c.exports},"8ad7":function(e,t,a){"use strict";var i=a("21f3");a.n(i).a},"9ced":function(e,t,a){"use strict";var i=a("ec2d");a.n(i).a},ec2d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7df8561a.05cfd9f1.js.map