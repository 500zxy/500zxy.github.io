(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-124c20de"],{5783:function(t,e,a){t.exports=a.p+"img/dwfptt.99b1823d.png"},"5f7e":function(t,e,a){},"8f19":function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-left"},[a("span",{staticClass:"left-back-content"},[t._v("单位发票抬头配置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"phon-right",staticStyle:{"border-left":"0"}},[e("img",{staticClass:"phon-right-img",attrs:{src:a("5783"),alt:""}})])}],i=(a("ac6a"),a("b775")),n="/api/blade-platform",r={name:"formSeven",props:["IDlist"],data:function(){return{ruleForm:{listData:[{address:"",bank:"",bank_account:"",id:"",name:"",paragraph:"",school_id:0,tel:"",delete:!1}]},canDelete:!0,countNum:1,loading:!1}},created:function(){this.getInvoiceListFN()},methods:{fliterArr:function(t){var e=[];return t.forEach((function(t){t.delete||e.push(t)})),e},getFliterAdd:function(){var t=0;this.ruleForm.listData.forEach((function(e){e.delete||(t+=1)})),this.canDelete=!(t<=1)},addItem:function(t){this.ruleForm.listData.splice(t+1,0,{address:"",bank:"",bank_account:"",id:"",name:"",paragraph:"",school_id:0,tel:"",delete:!1}),this.getFliterAdd()},deleteItem:function(t,e){e.delete=!0,this.getFliterAdd()},validateTwo:function(t,e,a){e||this.countNum||(this.countNum+=1,a&&this.$message.error(a))},Reset:function(){this.$refs.reasonList.resetFields(),this.getInvoiceListFN()},SectionToChinese:function(t){for(var e=["零","一","二","三","四","五","六","七","八","九"],a=["","十","百","千"],s="",i="",n=0,r=!0;t>0;){var l=t%10;0===l?r||(r=!0,i=e[l]+i):(r=!1,s=e[l],i=(s+=a[n])+i),n++,t=Math.floor(t/10)}return i},NumberToChinese:function(t){var e=["零","一","二","三","四","五","六","七","八","九"],a=["","万","亿","万亿","亿亿"],s=0,i="",n="",r=!1;if(0===t)return e[0];for(;t>0;){var l=t%1e4;r&&(n=e[0]+n),i=this.SectionToChinese(l),n=(i+=0!==l?a[s]:a[0])+n,r=l<1e3&&l>0,t=Math.floor(t/1e4),s++}return n},updateInvoiceFN_before:function(){var t=this;this.countNum=0,this.$refs.reasonList.validate((function(e){if(!e)return!1;t.countNum=1,t.updateInvoiceFN()}))},updateInvoiceFN:function(){var t=this;try{this.loading=!0,function(t){return Object(i.a)({url:"".concat(n,"/appconfiguration/updateInvoice"),method:"post",data:t})}(this.ruleForm.listData).then((function(e){var a=e.data;1e3===a.status?(t.$message.success("操作成功"),t.getInvoiceListFN()):t.$message({type:"error",message:a.msg}),t.loading=!1}))}catch(t){this.loading=!1}},getInvoiceListFN:function(){var t=this;try{this.loading=!0,Object(i.a)({url:"".concat(n,"/appconfiguration/getInvoiceList"),method:"get"}).then((function(e){var a=e.data;1e3===a.status?a.result.length>0&&(a.result.forEach((function(t){t.delete=!1})),t.ruleForm.listData=a.result,t.getFliterAdd()):t.$message({type:"error",message:a.msg}),t.loading=!1}))}catch(t){this.loading=!1}}}},l=(a("f4e0"),a("2877")),o=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"third"},[a("div",{staticClass:"third-formOne adhibition"},[a("div",{staticClass:"formOne-btn"},[t._m(0),a("div",{staticClass:"btn-right"},[a("el-button",{staticClass:"btn-two",attrs:{type:"default"},on:{click:function(e){return t.Reset()}}},[t._v("重置")]),a("el-button",{directives:[{name:"el-disabel-repeat-click",rawName:"v-el-disabel-repeat-click"}],staticClass:"btn-two",attrs:{type:"primary"},on:{click:function(e){return t.updateInvoiceFN_before()}}},[t._v("保存")])],1)]),a("el-form",{ref:"reasonList",staticStyle:{width:"60%",float:"left"},attrs:{model:t.ruleForm,"show-message":!1,"label-width":"86px"},on:{validate:t.validateTwo}},[a("div",{staticClass:"formOne-forms",staticStyle:{"border-right":"1px solid #dcdee2"}},[t._l(t.fliterArr(t.ruleForm.listData),(function(e,s){return[e.delete?t._e():a("div",{key:s,staticClass:"forms-one",staticStyle:{"margin-top":"57px"}},[a("div",{staticClass:"one-title"},[a("div",{staticClass:"title-left"},[a("span",{staticClass:"left-icon"},[a("i",{staticClass:"el-icon-s-operation"})]),a("span",{staticClass:"left-content"},[t._v("单位发票抬头("+t._s(t.NumberToChinese(s+1))+")")]),a("span",{staticClass:"left-content ",staticStyle:{color:"#ff0000"},on:{click:function(e){return t.addItem(s)}}},[a("i",{staticClass:"el-icon-plus"})]),t.canDelete?a("span",{staticClass:"left-content",staticStyle:{color:"#ff0000"},on:{click:function(a){return t.deleteItem(s,e)}}},[a("i",{staticClass:"el-icon-minus"})]):t._e()])]),a("div",{staticClass:"one-list"},[a("el-form-item",{attrs:{label:"名称",prop:"listData."+s+".name",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,placeholder:"请输入"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"税号",prop:"listData."+s+".paragraph",rules:{required:!0,message:"请输入税号",trigger:"blur"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,placeholder:"请输入"},model:{value:e.paragraph,callback:function(a){t.$set(e,"paragraph",a)},expression:"item.paragraph"}})],1),a("el-form-item",{attrs:{label:"单位地址",prop:"listData."+s+".address",rules:{required:!0,message:"请输入单位地址",trigger:"blur"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,placeholder:"请输入"},model:{value:e.address,callback:function(a){t.$set(e,"address",a)},expression:"item.address"}})],1),a("el-form-item",{attrs:{label:"电话号码",prop:"listData."+s+".tel",rules:{required:!0,message:"请输入电话号码",trigger:"tel"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,placeholder:"请输入",value:e.tel},on:{input:function(t){t=t.replace(/[^0-9-]+/,""),e.tel=t}}})],1),a("el-form-item",{attrs:{label:"开户银行",prop:"listData."+s+".bank",rules:{required:!0,message:"请输入开户银行",trigger:"bank"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,placeholder:"请输入"},model:{value:e.bank,callback:function(a){t.$set(e,"bank",a)},expression:"item.bank"}})],1),a("el-form-item",{attrs:{label:"银行账户",prop:"listData."+s+".bank_account",rules:{required:!0,message:"请输入银行账户",trigger:"bank_account"}}},[a("el-input",{staticClass:"list-input",attrs:{maxlength:100,value:e.bank_account,placeholder:"请输入"},on:{input:function(t){t=t.replace(/\D/g,""),e.bank_account=t}}})],1)],1)])]}))],2)]),t._m(1)],1)])}),s,!1,null,null,null);e.default=o.exports},f4e0:function(t,e,a){"use strict";var s=a("5f7e");a.n(s).a}}]);
//# sourceMappingURL=chunk-124c20de.9fecbe74.js.map